(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1020:function(t,e){},1027:function(t,e){},1135:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(63),n(40),n(88);var r=n(138),o=n.n(r),c=n(10),l=n(174),d=o.a.create({baseURL:c.l,params:{apikey:c.k}});function f(address,t){return d.get("?module=account&action=txlist&address=".concat(address,"&sort=desc"),{params:t}).then((function(t){var e={};return t.data.result.filter((function(t){return!e[t.hash]&&(e[t.hash]=!0,!0)})).map((function(t){return t.status=!!Number(t.txreceiptStatus),t}))}))}Object(l.a)(d)},1139:function(t,e,n){"use strict";n(125),n(15),n(78);var r=n(20),o=n(835),c=n(799),l=n(110),d=n(742),f=n(10),m={NOT_FOUND:"not_found",LOADING:"loading",PENDING:"pending",RECEIPT:"receipt",CONFIRMED:"confirmed",CONFIRMED_NOT_FINAL:"confirmed_not_final",FAILED:"failed"},h={TX_STATUS:m,HUB_TRANSFER_STATUS:f.t,components:{Loader:d.a},props:{hash:{type:String,required:!0},coinList:{type:Array,default:function(){return[]}}},fetch:function(){var t=this;this.isLoading=!0,Object(o.d)(),this.txWatcher=Object(o.f)(this.hash).once("tx",(function(e){t.tx=e,t.tokenInfoPromise=t.getTokenInfo(e).then((function(e){t.tokenInfo=e,t.isLoading=!1})).catch((function(t){console.log(t)}))})).once("confirmation",(function(e){t.tx=e})).then((function(e){return t.tx=e,e})).catch((function(t){"unsubscribed"!==t.message&&console.log(t)})),this.txWatcher.then((function(e){t.tokenInfoPromise.then((function(){"Send"===t.tokenInfo.type&&(t.transferWatcher=Object(c.d)(e.hash).on("update",(function(e){t.transfer=e})).catch((function(t){"unsubscribed"!==t.message&&console.log(t)})))}))}))},data:function(){return{isLoading:!0,tx:null,tokenInfo:null,tokenInfoPromise:null,txWatcher:null,transfer:null,transferWatcher:null}},computed:{timeDistance:function(){var t;return Object(l.l)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},time:function(){var t;return Object(l.m)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},txStatus:function(){if(!this.tx)return m.NOT_FOUND;if(this.tx.blockHash&&!this.tx.confirmations)return m.LOADING;if(!this.tx.blockHash)return m.PENDING;if(!1===this.tx.status)return m.FAILED;var t="Send"===this.tokenInfo.type?o.a:1;return this.tx.confirmations>=t?"Send"===this.tokenInfo.type?m.CONFIRMED_NOT_FINAL:m.CONFIRMED:m.RECEIPT},status:function(){var t;return null!==(t=this.transfer)&&void 0!==t&&t.status&&this.transfer.status!==f.t.not_found?this.transfer.status:this.txStatus},isFinished:function(){var t;return Object(l.o)(null===(t=this.transfer)||void 0===t?void 0:t.status)&&this.txStatus===m.CONFIRMED_NOT_FINAL||this.txStatus===m.CONFIRMED||this.txStatus===m.FAILED||this.txStatus===m.NOT_FOUND},symbol:function(){var t=this;if(!this.tokenInfo)return"";var e=this.coinList.find((function(e){return e.ethAddr===t.tokenInfo.tokenContract}));return e?e.symbol:""}},destroyed:function(){var t,e;"function"==typeof(null===(t=this.txWatcher)||void 0===t?void 0:t.unsubscribe)&&this.txWatcher.unsubscribe(),"function"==typeof(null===(e=this.transferWatcher)||void 0===e?void 0:e.unsubscribe)&&this.transferWatcher.unsubscribe()},methods:{pretty:l.p,getEtherscanTxUrl:l.d,getExplorerTxUrl:l.i,formatHash:function(t){return Object(l.v)(t,13)},getTokenInfo:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var input,n,r,c,l,d,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(input=t.input.slice(10),2!==(n=input.length/64)){e.next=7;break}r="Unlock",c=t.to,e.next=14;break;case 7:if(3!==n){e.next=13;break}r="Send",l="0x"+input.slice(0,64),c=o.b.abi.decodeParameter("address",l),e.next=14;break;case 13:return e.abrupt("return",{type:"Other"});case 14:return d="0x"+input.slice(64*(n-1)),e.next=17,Object(o.e)(c);case 17:return f=e.sent,m=Object(o.c)(o.b.abi.decodeParameter("uint256",d),f),e.abrupt("return",{type:r,tokenContract:c,amount:m});case 20:case"end":return e.stop()}}),e)})))()}}},v=n(54),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("div",{staticClass:"preview__transaction"},[n("div",{staticClass:"hub__preview-transaction-row u-text-overflow"},[n("div",[n("a",{staticClass:"link--main",attrs:{href:t.getEtherscanTxUrl(t.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.hash)))])]),t._v(" "),t.tokenInfo?n("div",{staticClass:"u-fw-700"},[t._v("\n            "+t._s(t.tokenInfo.type)+" "+t._s(t.pretty(t.tokenInfo.amount))+" "+t._s(t.symbol)+"\n        ")]):t._e()]),t._v(" "),n("div",{staticClass:"hub__preview-transaction-row hub__preview-transaction-meta"},[n("div",[t.tx.timestamp?[t._v(t._s(t.timeDistance)+" ago ("+t._s(t.time)+")")]:t._e()],2),t._v(" "),n("div",[t.status===t.$options.TX_STATUS.LOADING?[t._v("Loading")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.PENDING?[t._v("Pending")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.RECEIPT?[t._v("Received, waiting confirmations")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED?[t._v("Confirmed")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED_NOT_FINAL?[t._v("Confirmed, waiting for bridge")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.deposit_to_hub_received?[t._v("Bridge collecting batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_created?[t._v("Bridge created batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_executed?[t._v("\n                Success\n                "),n("a",{staticClass:"link--main",attrs:{href:t.getExplorerTxUrl(t.transfer.outTxHash),target:"_blank"}},[t._v(t._s(t.formatHash(t.transfer.outTxHash)))])]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.refund?[t._v("Refunded")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.FAILED?n("span",{staticClass:"u-text-error"},[t._v("Failed")]):t._e(),t._v(" "),n("Loader",{staticClass:"hub__preview-loader",attrs:{"is-loading":!t.isFinished}})],2)])])}),[],!1,null,null,null);e.a=component.exports},1148:function(t,e,n){"use strict";n.r(e);n(25),n(1),n(55),n(57),n(62);var r=n(30),o=n(744),c=(n(125),n(40),n(46),n(111),n(0)),l=n(28),d=n(110),f=n(799),m=n(742);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function _(t,e,n){var r=t.find((function(t){return t.name===e})),o=r?r.value:"0";return n?o:new l.a(o).div(Math.pow(10,10)).toFixed(18)}l.a.DP=18,l.a.RM=2;var y={components:{Loader:m.a},props:{isLoading:{type:Boolean,default:!1},coinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},data:function(){return{}},computed:{coinListMapped:function(){var t=this;return this.coinList.map((function(e){return v(v({},e),{},{price:_(t.priceList,"minter/"+e.minterId)})}))},ethereumPrice:function(){return _(this.priceList,"eth/0")},ethereumGas:function(){return _(this.priceList,"eth/gas",!0)/10}},methods:{pretty:d.p,getExplorerCoinUrl:d.g,getEtherscanAddressUrl:d.c}},C=n(54),x=Object(C.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"panel"},[t.isLoading?n("div",{staticClass:"panel__content panel__section u-text-center"},[n("Loader",{attrs:{isLoading:!0}})],1):[t.coinList.length?n("div",{staticClass:"table-wrap"},[n("table",[n("thead",[n("tr",{staticClass:"u-text-nowrap"},[n("th",{attrs:{width:"37.5%"}},[t._v(t._s(t.$td("Available tokens","hub.coin-table-name")))]),t._v(" "),n("th",{attrs:{width:"37.5%"}},[t._v(t._s(t.$td("Contract","hub.coin-table-contract")))]),t._v(" "),n("th",{attrs:{width:"25%"}},[t._v(t._s(t.$td("Price","hub.coin-table-price")))])])]),t._v(" "),n("tbody",t._l(t.coinListMapped,(function(e){return n("tr",{key:e.minterId,staticClass:"u-text-nowrap"},[n("td",[n("a",{staticClass:"link--default",attrs:{href:t.getExplorerCoinUrl(e.symbol),target:"_blank",rel:"noopener"}},[t._v(t._s(e.symbol))])]),t._v(" "),n("td",[n("a",{staticClass:"link--default",attrs:{href:t.getEtherscanAddressUrl(e.ethAddr),target:"_blank",rel:"noopener"}},[t._v(t._s(e.denom.toUpperCase()))])]),t._v(" "),n("td",[t._v("\n                            $"+t._s(t.pretty(e.price))+"\n                        ")])])})),0)])]):n("div",{staticClass:"panel__content panel__section u-text-center"},[t._v("No Coins")]),t._v(" "),n("dl",{staticClass:"dl--table"},[n("dt",[t._v(t._s(t.$td("Ethereum price:","hub.ethereum-price")))]),t._v(" "),n("dd",[t._v("$"+t._s(t.pretty(t.ethereumPrice)))]),t._v(" "),n("dt",[t._v(t._s(t.$td("Gas price:","hub.ethereum-gase")))]),t._v(" "),n("dd",[t._v(t._s(t.ethereumGas)+" gwei")])])]],2)}),[],!1,null,null,null).exports,$=(n(63),n(88),n(730)),w=n(731),T=n.n(w),O=n(759),S=n.n(O),E=n(732),A=n.n(E),k=n(735),L=n(5),j=n(91),F=n(740),P=n(10),I=n(728),M=n(315),N=n(749),D=n(757),U=n(739),R=n(754);l.a.DP=18,l.a.RM=2;var V,H="min",B={SPEED_MIN:H,SPEED_FAST:"fast",components:{FieldQr:N.a,FieldUseMax:D.a,FieldCoin:U.a,Loader:m.a,Modal:R.a},directives:{autosize:k.a,checkEmpty:I.a},mixins:[$.validationMixin],props:{ethFee:{type:Object,required:!0},coinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},data:function(){return{form:{coin:"",amount:"",address:"",speed:H},isFormSending:!1,serverSuccess:null,serverError:"",isSuccessModalVisible:!1}},computed:{coinId:function(){var t=this,e=this.coinList.find((function(e){return e.symbol===t.form.coin}));return e?e.minterId:void 0},coinPrice:function(){var t=this,e=this.priceList.find((function(e){return e.name==="minter/"+t.coinId}));return e?e.value:"0"},coinFee:function(){if("0"===this.coinPrice)return 0;var t=this.form.speed===H?this.ethFee.min:this.ethFee.fast;return new l.a(t).div(this.coinPrice).toFixed()},hubFee:function(){var t=new l.a(this.coinFee).plus(this.form.amount||0);return t.div(.99).minus(t).toFixed()},totalFee:function(){return new l.a(this.coinFee).plus(this.hubFee).toFixed()},amountToSpend:function(){return new l.a(this.totalFee).plus(this.form.amount||0).toFixed()},maxAmount:function(){var t=this,e=this.$store.getters.balance.find((function(e){return e.coin.symbol===t.form.coin}));if(e){var n=new l.a(e.amount).minus(this.totalFee);return n.lt(0)?0:n.toFixed()}},suggestionList:function(){var t=this;return this.$store.getters.balance.filter((function(e){return t.coinList.find((function(t){return Number(t.minterId)===e.coin.id}))}))}},validations:function(){var t=this;return{form:{address:{required:T.a,validAddress:function(address){return/^0x[0-9a-fA-F]{40}$/.test(address)}},coin:{required:T.a,minLength:A()(3),supported:function(){return!!t.coinId}},amount:{required:T.a,minValue:function(t){return t>0},maxValue:S()(this.maxAmount||0)}}}},methods:{pretty:d.p,getExplorerTxUrl:d.i,submit:function(){var t=this;if(!this.$v.$invalid){this.serverError="",this.serverSuccess=null,this.isFormSending=!0;var e={type:L.a.SEND,data:{to:P.s,value:this.amountToSpend,coin:this.coinId},payload:JSON.stringify({recipient:this.form.address,type:"send_to_eth",fee:Object(j.b)(this.coinFee)})};return Object(F.i)(e,{privateKey:this.$store.getters.privateKey}).then((function(e){t.isFormSending=!1,t.serverSuccess=e,t.isSuccessModalVisible=!0,t.clearForm(),t.$store.commit("hub/saveWithdrawFromGate",e)})).catch((function(e){console.log(e),t.isFormSending=!1,t.serverError=Object(M.a)(e)}))}this.$v.$touch()},clearForm:function(){this.$v.$reset(),this.form.address="",this.form.amount="",this.form.coin="",this.form.speed=H}}},W=Object(C.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n            "+t._s(t.$td("Withdraw","hub.withdraw-title"))+"\n        ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n            "+t._s(t.$td("Send coins from Minter to Ethereum","hub.withdraw-description"))+"\n        ")])]),t._v(" "),n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("FieldQr",{attrs:{$value:t.$v.form.address,label:t.$td("Withdraw to address","form.hub-withdraw-address")},on:{blur:function(e){return t.$v.form.address.$touch()}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address","string"==typeof e?e.trim():e)},expression:"form.address"}}),t._v(" "),t.$v.form.address.$error?t.$v.form.address.$dirty&&!t.$v.form.address.required?n("span",{staticClass:"form-field__error"},[t._v("Enter Ethereum address")]):t.$v.form.address.$dirty&&!t.$v.form.address.validAddress?n("span",{staticClass:"form-field__error"},[t._v("Invalid Ethereum address")]):t._e():n("span",{staticClass:"form-field__help"},[t._v("Ethereum address starting with 0x…")])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{$value:t.$v.form.coin,label:t.$td("Coin","form.coin"),"coin-list":t.suggestionList},model:{value:t.form.coin,callback:function(e){t.$set(t.form,"coin",e)},expression:"form.coin"}}),t._v(" "),t.$v.form.coin.$dirty&&!t.$v.form.coin.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported by Hub bridge","form.hub-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{$value:t.$v.form.amount,label:t.$td("Amount","form.hub-amount"),"max-value":t.maxAmount},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),t.$v.form.amount.$dirty&&!t.$v.form.amount.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):t.$v.form.amount.$dirty&&!t.$v.form.amount.minValue?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))]):t.$v.form.amount.$dirty&&!t.$v.form.amount.maxValue?n("span",{staticClass:"form-field__error"},[t._v("Not enough "+t._s(t.form.coin)+" (max "+t._s(t.pretty(t.maxAmount))+")")]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("div",{staticClass:"form-check-label"},[t._v("Tx speed")]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.speed,expression:"form.speed"}],staticClass:"form-check__input",attrs:{type:"radio",name:"speed"},domProps:{value:t.$options.SPEED_MIN,checked:t._q(t.form.speed,t.$options.SPEED_MIN)},on:{change:function(e){return t.$set(t.form,"speed",t.$options.SPEED_MIN)}}}),t._v(" "),n("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Normal","form.hub-withdraw-speed-normal")))])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.speed,expression:"form.speed"}],staticClass:"form-check__input",attrs:{type:"radio",name:"speed"},domProps:{value:t.$options.SPEED_FAST,checked:t._q(t.form.speed,t.$options.SPEED_FAST)},on:{change:function(e){return t.$set(t.form,"speed",t.$options.SPEED_FAST)}}}),t._v(" "),n("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Fast","form.hub-withdraw-speed-fast")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-disabled":t.$v.$invalid,"is-loading":t.isFormSending}},[n("span",{staticClass:"button__content"},[t._v("Withdraw")]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1),t._v(" "),t.serverError?n("div",{staticClass:"form-field__error"},[t._v(t._s(t.serverError))]):t._e()])])]),t._v(" "),n("div",{staticClass:"panel__section panel__section--tint"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.amountToSpend))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Total spend","form.hub-withdraw-estimate")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2 u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.coinFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Ethereum fee","form.hub-withdraw-eth-fee")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2 u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.hubFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("HUB fee","form.hub-withdraw-hub-fee")))])])])])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isSuccessModalVisible},on:{"update:isOpen":function(e){t.isSuccessModalVisible=e},"update:is-open":function(e){t.isSuccessModalVisible=e}}},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[t._t("success-modal-header",[n("h1",{staticClass:"panel__header-title"},[t._v("\n                        "+t._s(t.$td("Success!","form.success-title"))+"\n                    ")])])],2),t._v(" "),n("div",{staticClass:"panel__section u-text-left"},[n("strong",[t._v(t._s(t.$td("Tx sent:","form.tx-sent")))]),t._v(" "),t.serverSuccess?n("a",{staticClass:"link--default u-text-break",attrs:{href:t.getExplorerTxUrl(t.serverSuccess.hash),target:"_blank"}},[t._v(t._s(t.serverSuccess.hash))]):t._e()]),t._v(" "),n("div",{staticClass:"panel__section"},[t.serverSuccess?n("a",{staticClass:"button button--main button--full",attrs:{href:t.getExplorerTxUrl(t.serverSuccess.hash),target:"_blank"}},[t._v("\n                    "+t._s(t.$td("View transaction","form.success-view-button"))+"\n                ")]):t._e(),t._v(" "),n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){t.isSuccessModalVisible=!1}}},[t._v("\n                    "+t._s(t.$td("Close","form.success-close-button"))+"\n                ")])])])])],1)}),[],!1,null,null,null).exports,X=(n(71),n(184),n(45),{WITHDRAW_STATUS:P.t,components:{Loader:m.a},fetch:function(){this.$store.dispatch("hub/loadWithdrawList")},data:function(){return{txPollList:{}}},computed:{hasTx:function(){return Object.keys(this.$store.state.hub.minterList).length},withdrawList:function(){return Object.values(this.$store.state.hub.minterList).sort((function(a,b){return new Date(b.timestamp)-new Date(a.timestamp)}))}},watch:{"$store.state.hub.minterList":{handler:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(n){if(!t.txPollList[n]){var r=e[n];Object(d.o)(null==r?void 0:r.status)||(t.txPollList[n]=Object(f.d)(n,r.timestamp).on("update",(function(e){t.$store.commit("hub/updateWithdraw",e)})).then((function(){delete t.txPollList[n]})).catch((function(e){"unsubscribed"!==e.message?console.log(e):delete t.txPollList[n]})))}}))},deep:!0,immediate:!0}},destroyed:function(){Object.values(this.txPollList).forEach((function(t){"function"==typeof t.unsubscribe&&t.unsubscribe()}))},methods:{getTime:d.m,getTimeDistance:d.l,getExplorerTxUrl:d.i,getEtherscanTxUrl:d.d,convertFromPip:j.a,pretty:d.p,formatHash:function(t){return Object(d.v)(t||"",13)},isHubTransferFinished:d.o}}),G=Object(C.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasTx?n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header panel__header-title"},[t._v("Transactions")]),t._v(" "),t._l(t.withdrawList,(function(e){return n("div",{key:e.tx.hash,staticClass:"panel__section preview__transaction"},[n("div",{staticClass:"hub__preview-transaction-row u-text-overflow"},[n("div",[n("a",{staticClass:"link--main",attrs:{href:t.getExplorerTxUrl(e.tx.hash),target:"_blank"}},[t._v(t._s(t.formatHash(e.tx.hash)))])]),t._v(" "),n("div",{staticClass:"u-fw-700"},[t._v(t._s(t.pretty(e.amount))+" "+t._s(e.tx.data.coin.symbol))])]),t._v(" "),n("div",{staticClass:"hub__preview-transaction-row hub__preview-transaction-meta"},[n("div",[t._v(t._s(t.getTimeDistance(e.timestamp||0))+" ago ("+t._s(t.getTime(e.timestamp||0))+")")]),t._v(" "),n("div",[e.status&&e.status!==t.$options.WITHDRAW_STATUS.not_found?t._e():[t._v("Sending to Hub bridge")],t._v(" "),e.status===t.$options.WITHDRAW_STATUS.not_found_long?[t._v("Not found")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.deposit_to_hub_received?[t._v("Bridge collecting batch to Ethereum")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.batch_created?[t._v("Sent to Ethereum, waiting confirmation")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.batch_executed?[t._v("\n                    Success\n                    "),n("a",{staticClass:"link--main",attrs:{href:t.getEtherscanTxUrl(e.ethTxHash),target:"_blank"}},[t._v(t._s(t.formatHash(e.ethTxHash)))])]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.refund?[t._v("Refunded")]:t._e(),t._v(" "),n("Loader",{staticClass:"hub__preview-loader",attrs:{"is-loading":!t.isHubTransferFinished(e.status)}})],2)])])}))],2):t._e()}),[],!1,null,null,null).exports,z=n(828).a,K={components:{HubCoinList:x,HubWithdrawForm:W,HubWithdrawTxList:G,HubDepositForm:Object(C.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-wrap"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                "+t._s(t.$td("Deposit","hub.deposit-title"))+"\n            ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n                "+t._s(t.$td("Send coins from Ethereum to Minter","hub.deposit-description"))+"\n            ")])]),t._v(" "),t.isConnected?t._e():n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell"},[t._v("\n                    Connect your Ethereum wallet with\n                    "),n("img",{staticClass:"hub__icon-wc",attrs:{alt:"",role:"presentation",src:t.BASE_URL_PREFIX+"/img/icon-walletconnect.png",srcset:t.BASE_URL_PREFIX+"/img/icon-walletconnect@2x.png 2x"}}),t._v("\n                    WalletConnect\n                ")]),t._v(" "),n("div",{staticClass:"u-cell"},[n("button",{staticClass:"button button--main",on:{click:t.connectEth}},[t._v("Connect")])])])]),t._v(" "),t.isConnected?n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("FieldQr",{attrs:{$value:t.$v.form.address,label:t.$td("Deposit to address","form.hub-deposit-address")},on:{blur:function(e){return t.$v.form.address.$touch()}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address","string"==typeof e?e.trim():e)},expression:"form.address"}}),t._v(" "),t.$v.form.address.$error?t.$v.form.address.$dirty&&!t.$v.form.address.required?n("span",{staticClass:"form-field__error"},[t._v("Enter Minter address")]):t.$v.form.address.$dirty&&!t.$v.form.address.validAddress?n("span",{staticClass:"form-field__error"},[t._v("Invalid Minter address")]):t._e():n("span",{staticClass:"form-field__help"},[t._v("Minter address starting with Mx…")])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{readonly:t.isFormSending,$value:t.$v.form.coin,label:t.$td("Coin","form.coin"),"coin-list":t.suggestionList},model:{value:t.form.coin,callback:function(e){t.$set(t.form,"coin",e)},expression:"form.coin"}}),t._v(" "),t.$v.form.coin.$dirty&&!t.$v.form.coin.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported by Hub bridge","form.hub-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{readonly:t.isFormSending,$value:t.$v.form.amount,label:t.$td("Amount","form.hub-amount"),"max-value":t.selectedBalance},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),t.$v.form.amount.$dirty&&!t.$v.form.amount.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):!t.$v.form.amount.$dirty||t.$v.form.amount.validAmount&&t.$v.form.amount.minValue?t.$v.form.amount.$dirty&&!t.$v.form.amount.maxValue?n("span",{staticClass:"form-field__error"},[t._v("Not enough "+t._s(t.form.coin)+" (max "+t._s(t.pretty(t.selectedBalance))+")")]):t._e():n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyExact(t.selectedBalance)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Token balance","form.hub-deposit-selected-balance")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyExact(t.selectedUnlocked)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Token unlocked","form.hub-deposit-selected-unlocked")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-loading":t.isFormSending,"is-disabled":t.$v.$invalid}},[t.isCoinApproved?n("span",{staticClass:"button__content"},[t._v("Send")]):n("span",{staticClass:"button__content"},[t._v("Unlock")]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1)]),t._v(" "),t.serverError?n("div",{staticClass:"u-cell form__error send__text"},[t._v("\n                    "+t._s(t.serverError)+"\n                ")]):t._e()])]):t._e(),t._v(" "),t.isConnected?n("div",{staticClass:"panel__section panel__section--tint"},[t._v("\n            Wallet connected "),n("br"),t._v(" "),n("a",{staticClass:"link--default",attrs:{href:"https://ropsten.etherscan.io/address/"+t.ethAddress,target:"_blank"}},[t._v(t._s(t.ethAddress))]),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"button button--ghost u-mt-10",on:{click:t.reconnectEth}},[t._v("Reconnect")])]):t._e()]),t._v(" "),t.transactionList.length?n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header panel__header-title"},[t._v("Latest transactions")]),t._v(" "),t._l(t.transactionList,(function(e){return n("TxListItem",{key:e.hash,staticClass:"panel__section",attrs:{hash:e.hash,"coin-list":t.coinList}})}))],2):t._e()])}),[],!1,null,null,null).exports},middleware:function(t){var e=t.app;t.store.commit("SET_SECTION_NAME",e.$td("Deposit and withdraw","common.page-deposit"))},fetch:function(){var t=this;return Promise.all([Object(f.b)(),Object(f.a)(),Object(f.c)()]).then((function(e){var n=Object(r.a)(e,3),o=n[0],c=n[1],l=n[2];t.ethFee=o,t.coinList=c,t.priceList=l}))},head:function(){var title=Object(o.a)(this.$store.state.sectionName,this.$i18n.locale),t=this.$td("","deposit.seo-description"),e="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:t},{hid:"og-description",name:"og:description",content:t},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-wallet").concat(e,".png")}]}},data:function(){return{ethFee:{min:0,fast:0},coinList:[],priceList:[]}},computed:{},mounted:function(){var t=this;V=setInterval((function(){Promise.all([Object(f.b)(),Object(f.c)()]).then((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];t.ethFee=o,t.priceList=c}))}),15e3)},destroyed:function(){clearInterval(V)},methods:{}},Q=Object(C.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"u-section u-container"},[n("HubCoinList",{attrs:{"coin-list":t.coinList,"price-list":t.priceList,"is-loading":t.$fetchState.pending}}),t._v(" "),n("HubWithdrawForm",{attrs:{"eth-fee":t.ethFee,"coin-list":t.coinList,"price-list":t.priceList}}),t._v(" "),n("HubWithdrawTxList"),t._v(" "),n("HubDepositForm",{attrs:{"coin-list":t.coinList}})],1)}),[],!1,null,null,null);e.default=Q.exports},739:function(t,e,n){"use strict";n(63),n(40),n(15),n(747);var r=n(56),o=n(316),c=n(774),l=n(728),d=n(110),f=n(10),m=n(102),h=n(756);function v(t,e){return e===f.h.ANY||(e===f.h.ANY_TOKEN?t===f.h.TOKEN||t===f.h.POOL_TOKEN:t===e)}var _={ideFix:null,MAX_ITEM_COUNT:6,components:{VueSimpleSuggest:c.a,InputUppercase:h.a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:String,default:""},$value:{type:Object,required:!0},label:{type:String,required:!0},coinList:{type:Array,default:function(){return[]}},coinType:{type:String,default:f.h.ANY}},data:function(){return{coinListAll:[]}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,Object(o.a)(t,["input"]));return e},isConListSpecified:function(){return this.coinList&&this.coinList.length},currentCoinList:function(){var t=this;return this.isConListSpecified?this.coinList.filter((function(e){return"object"!==Object(r.a)(e)||v(e.coin.type,t.coinType)})):this.coinListAll.filter((function(e){return v(e.type,t.coinType)})).map((function(t){return t.symbol}))},maxSuggestions:function(){return this.isConListSpecified?0:6}},watch:{currentCoinList:function(){var t=this.$refs.vss;t.canSend?t.research():t.getSuggestions(t.text).then((function(e){t.$set(t,"suggestions",e)}))}},mounted:function(){var t=this;this.$store.getters.isOfflineMode||Object(m.d)().then((function(e){t.coinListAll=Object.freeze(e)})).catch((function(t){console.log(t)}))},methods:{suggestionOrder:function(t){return t?this.currentCoinList.slice(0).sort((function(a,b){return a===t?-1:b===t?1:0})):this.currentCoinList},suggestionFilter:function(t,e){return!e||0===this.getSuggestionCoin(t).indexOf(e)},handleSuggestionClick:function(t,e){e.preventDefault()},getSuggestionCoin:function(t){var e;return(null===(e=t.coin)||void 0===e?void 0:e.symbol)||t},getSuggestionAmount:function(t){var e=t.value||t.amount;return e?"(".concat(Object(d.p)(e),")"):""}}},y=n(54),component=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error}},[n("VueSimpleSuggest",{ref:"vss",attrs:{value:t.value,list:t.suggestionOrder,"max-suggestions":t.maxSuggestions,"min-length":0,"filter-by-query":!0,filter:t.suggestionFilter,"display-attribute":"coin.symbol","value-attribute":"coin.symbol",destyled:!0,controls:{showList:[38,40]}},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)},"suggestion-click":t.handleSuggestionClick},scopedSlots:t._u([{key:"suggestion-item",fn:function(e){var r=e.suggestion;return n("span",{},[t._v("\n            "+t._s(t.getSuggestionCoin(r))),t.getSuggestionAmount(r)?n("span",[t._v(" "+t._s(t.getSuggestionAmount(r)))]):t._e()])}}])},[n("InputUppercase",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",value:t.value}},"InputUppercase",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)],1)}),[],!1,null,null,null);e.a=component.exports},743:function(t,e,n){"use strict";n(88);var r=n(316),o=(n(765),n(767)),c={ideFix:null,imaskAmount:{mask:Number,scale:18,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[","]},directives:{imask:o.a},props:{value:{type:[String,Number],default:""}},data:function(){return{maskedValue:""}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,Object(r.a)(t,["input"]));return e}},watch:{value:function(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted:function(){this.updateMaskState(this.value)},methods:{updateMaskState:function(t){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}},onAcceptInput:function(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},l=n(54),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.$options.imaskAmount,expression:"$options.imaskAmount"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"decimal"},on:{accept:t.onAcceptInput}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},756:function(t,e,n){"use strict";var r=n(316),o={props:{value:{type:String,default:""}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,t.blur,t.focus,Object(r.a)(t,["input","blur","focus"]));return e}},mounted:function(){this.updateValue(this.$refs.input.value)},methods:{updateValue:function(t){(t=t.toUpperCase())!==this.value&&this.$emit("input",t)}}},c=n(54),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({ref:"input",domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},757:function(t,e,n){"use strict";n(125),n(88),n(111);var r=n(28),o=n(729),c=n(728),l=n(743);r.a.RM=2;var d={components:{InputMaskedAmount:l.a},directives:{checkEmpty:c.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},maxValue:{type:[String,Number],default:void 0},addressBalance:{type:Array,default:function(){return[]}},selectedCoinSymbol:{type:String,default:""},fee:{type:[Object,null],default:null}},data:function(){return{isUseMax:!1}},computed:{maxValueComputed:function(){var t,e,n=this;if(void 0!==this.maxValue)return this.maxValue;var c=this.addressBalance.find((function(t){return t.coin.symbol===n.selectedCoinSymbol}));if(c){if(!function(t,e){var n=Object(o.h)(e);if(!n&&t.symbol===e)return!0;if(n&&t.id===e)return!0;return!1}(c.coin,null===(t=this.fee)||void 0===t?void 0:t.coin))return c.amount;var l=(null===(e=this.fee)||void 0===e?void 0:e.value)||0,d=new r.a(c.amount).minus(l).toFixed();return d>0?d:"0"}},isMaxValueDefined:function(){return void 0!==this.maxValueComputed}},watch:{value:function(t){(t||0===t)&&this.isMaxValueDefined?new r.a(t).toFixed()!==new r.a(this.maxValueComputed).toFixed()&&(this.isUseMax=!1):this.isUseMax=!1},maxValueComputed:function(t){this.isMaxValueDefined&&this.isUseMax&&this.useMax()}},methods:{useMax:function(){if(!this.isMaxValueDefined)return!1;this.isUseMax=!0,this.$emit("input",this.maxValueComputed),this.$value.$touch()}}},f=n(54),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error,"form-field--with-use-max":t.isMaxValueDefined}},[n("InputMaskedAmount",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal",value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){return t.$value.$touch()}}},"InputMaskedAmount",t.$attrs,!1)),t._v(" "),t.isMaxValueDefined?n("button",{staticClass:"form-field__use-max link--main link--opacity u-semantic-button",attrs:{type:"button"},on:{click:t.useMax}},[t._v("Use max")]):t._e(),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null);e.a=component.exports},799:function(t,e,n){"use strict";n.d(e,"b",(function(){return T})),n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return k}));n(125),n(88),n(1),n(55),n(45),n(57),n(62);var r=n(0),o=n(30),c=n(138),l=n.n(c),d=n(721),f=n(223),m=n.n(f),h=n(780),v=n(102),_=n(10),y=n(174),C=n(110);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function $(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=l.a.create({baseURL:_.r,adapter:Object(d.a)(l.a.defaults.adapter,{enabledByDefault:!1})});function T(){return w.get("oracle/eth_fee").then((function(t){return t.data.result}))}function O(){return Promise.all([w.get("oracle/coins",{cache:S}).then((function(t){return t.data.result})),Object(v.d)()]).then((function(t){var e=Object(o.a)(t,2),n=e[0],r=e[1];return n.forEach((function(t){var e=r.find((function(e){return e.id===Number(t.minterId)}));t.symbol=e.symbol})),n}))}Object(y.a)(w);var S=new m.a({maxAge:6e4});var E=new m.a({maxAge:1e4});function A(){return w.get("oracle/prices",{cache:E}).then((function(t){return t.data.result.list}))}function k(t,e){var n,r=!1,o=new h.TinyEmitter,c=function c(){return function(t){return w.get("minter/tx_status/".concat(t)).then((function(t){return t.data.result}))}(t).catch((function(t){console.log(t)})).then((function(l){if(r)throw new Error("unsubscribed");if(l){var d=e?new Date(e):new Date;if(Date.now()-d.getTime()>6e5&&l.status===_.t.not_found&&(l=$($({},l),{},{status:_.t.not_found_long})),n!==l.status&&(n=l.status,o.emit("update",l)),Object(C.o)(l.status))return l}return(time=1e4,new Promise((function(t){setTimeout(t,time)}))).then((function(){return c(t)}));var time}))}().then((function(t){return o.emit("finished",t),t}));return function(t,e){t.on=function(){return e.on.apply(e,arguments),t},t.once=function(){return e.once.apply(e,arguments),t}}(c,o),c.unsubscribe=function(){r=!0,o.off("update"),o.off("finished")},c}},828:function(t,e,n){"use strict";(function(t){n(25),n(63),n(125),n(40),n(15),n(1),n(12),n(55),n(23),n(57),n(62),n(78);var r=n(20),o=n(0),c=n(30),l=n(47),d=n.n(l),f=n(940),m=n.n(f),h=n(993),v=n.n(h),_=n(730),y=n(731),C=n.n(y),x=n(759),$=n.n(x),w=n(732),T=n.n(w),O=n(185),S=n.n(O),E=(n(764),n(735)),A=n(835),k=n(1135),L=n(110),j=n(900),F=n(315),P=n(728),I=n(742),M=n(1139),N=n(757),D=n(749),U=n(739);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var V,H,B="finished",W="rejected",X="pending",G="approve",z="transfer";function K(t){return new A.b.Contract(j.a,t)}var Q="0x28f49329EE5bF3D1cbB3925c7FA5Cfc4BbB6AFED",J=new A.b.Contract(j.b,Q),Y=S()({type:"validAmount"},(function(t){return parseFloat(t)>=0}));e.a={TX_APPROVE:G,TX_TRANSFER:z,components:{Loader:I.a,TxListItem:M.a,FieldUseMax:N.a,FieldQr:D.a,FieldCoin:U.a},directives:{autosize:E.a,checkEmpty:P.a},mixins:[_.validationMixin],props:{coinList:{type:Array,required:!0}},data:function(){return{ethAddress:"",balances:{},decimals:{},allowanceList:{},form:{coin:"",amount:"",address:this.$store.getters.address},transactionList:[],isFormSending:!1,serverError:"",waitApproveConfirmation:!1,isConnectionStartedAndModalClosed:!1}},validations:function(){var t=this;return{form:{address:{required:C.a,validAddress:function(address){return/^Mx[0-9a-fA-F]{40}$/.test(address)}},coin:{required:C.a,minLength:T()(3),supported:function(){return!!t.coinContractAddress}},amount:{required:C.a,validAmount:Y,maxValue:$()(this.selectedBalance||0),minValue:function(t){return t>0}}}}},computed:{isConnected:function(){return!!this.ethAddress},coinContractAddress:function(){var t=this,e=this.coinList.find((function(e){return e.symbol===t.form.coin}));return e?e.ethAddr:void 0},allowance:function(){var t=this.allowanceList[this.form.coin];return t||{value:null,promiseStatus:null,promise:null}},isCoinApproved:function(){if(!this.allowance.value)return!1;var t=new d.a(this.allowance.value,10),e=new d.a(Object(A.g)(this.form.amount||"0",this.decimals[this.form.coin]||18),10);return t.gt(new d.a(0))&&t.gte(e)},selectedBalance:function(){return this.balances[this.form.coin]||0},selectedUnlocked:function(){return this.allowance.value?Object(A.c)(this.allowance.value,this.decimals[this.form.coin]||18):0},suggestionList:function(){return this.coinList.map((function(t){return t.symbol.toUpperCase()}))}},watch:{ethAddress:{handler:function(t){var address,e=this;t?(this.updateBalance(),this.getAllowance(),(address=t,Promise.all([Object(k.a)(address,{page:1,offset:1e3}),Promise.resolve([])]).then((function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];n=n.filter((function(t){return!r.find((function(e){return e.hash.toLowerCase()===t.hash.toLowerCase()}))}));var o=r.concat(n);return(o=o.filter((function(t){var input=t.input.slice(10),e=input.length/64;if(2===e){var n="0x"+input.slice(0,64);return A.b.abi.decodeParameter("address",n)===Q}return 3===e&&t.to.toLowerCase()===Q.toLowerCase()}))).slice(0,5)}))).then((function(t){e.transactionList=t}))):this.transactionList=[]}},"form.coin":{handler:function(){this.updateBalance(),this.getAllowance()}},isCoinApproved:{handler:function(t){t&&this.waitApproveConfirmation&&(this.waitApproveConfirmation=!1,this.isFormSending=!1)}}},mounted:function(){var t=this;this.initConnector(),H.connected&&(this.ethAddress=H.accounts[0]),V=setInterval((function(){t.updateBalance(),t.getAllowance()}),5e3)},destroyed:function(){clearInterval(V)},methods:{pretty:L.p,prettyExact:L.q,connectEth:function(){H||this.initConnector(),H.createSession(),this.isConnectionStartedAndModalClosed&&H.uri&&v.a.open(H.uri,(function(){}))},reconnectEth:function(){var t=this;H.killSession().then((function(){t.$nextTick((function(){t.connectEth()}))}))},initConnector:function(){var t=this;(H=new m.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:v.a})).on("connect",this.handleEvent),H.on("session_update",this.handleEvent),H.on("disconnect",this.handleEvent),H.on("modal_closed",(function(){t.isConnectionStartedAndModalClosed=!0}))},handleEvent:function(t,e){if(t)throw t;var n=e.params[0],r=n.accounts;n.chainId;r?this.ethAddress=r[0]:(this.ethAddress="",H=null)},updateBalance:function(){var t=this;if(this.isConnected&&this.coinContractAddress){var e=this.form.coin;Promise.all([K(this.coinContractAddress).methods.balanceOf(this.ethAddress).call(),K(this.coinContractAddress).methods.decimals().call()]).then((function(n){var r=Object(c.a)(n,2),o=r[0],l=r[1];t.$set(t.balances,e,Object(A.c)(o,l)),t.$set(t.decimals,e,l)})).catch(console.error)}},submit:function(){var t,e=this;if(!this.$v.$invalid)return this.isFormSending=!0,this.serverError="",this.getIsCoinApproved().then((function(n){return(t=!n)?e.sendApproveTx():e.sendCoinTx()})).then((function(n){e.transactionList.unshift({hash:n,type:t?G:z,timestamp:(new Date).toISOString()})})).catch((function(t){e.serverError=Object(F.a)(t),console.error(t),e.isFormSending=!1}));this.$v.$touch()},getAllowance:function(){var t=this,e=this.form.coin,n=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.allowance);if(this.isConnected&&this.coinContractAddress&&n.promiseStatus!==X){var r=K(this.coinContractAddress).methods.allowance(this.ethAddress,Q).call().then((function(n){t.$set(t.allowanceList,e,{value:n,promiseStatus:B,promise:r})})).catch((function(n){console.log(n),t.$set(t.allowanceList,e,{value:null,promiseStatus:W,promise:r}),t.serverError="Can't get allowance"}));return this.$set(this.allowanceList,e,{promiseStatus:X,promise:r,value:n.value}),r}},getIsCoinApproved:function(){var t=this;return this.allowance.promiseStatus===B?Promise.resolve(this.isCoinApproved):this.allowance.promiseStatus===X?this.allowance.promise.then((function(){return new Promise((function(e){t.$nextTick((function(){e(t.isCoinApproved)}))}))})):this.allowance.promiseStatus===W?Promise.reject("Can't get allowance"):void 0},sendApproveTx:function(){var t=this,data=K(this.coinContractAddress).methods.approve(Q,Object(A.g)(this.form.amount,this.decimals[this.form.coin])).encodeABI();return this.sendEthTx(this.coinContractAddress,data).then((function(e){return t.waitApproveConfirmation=!0,e}))},sendCoinTx:function(){var address,e=this;address=t.concat([t.alloc(12),t.from(A.h.hexToBytes(this.form.address.replace("Mx","0x")))]);var data=J.methods.sendToMinter(this.coinContractAddress,address,Object(A.g)(this.form.amount,this.decimals[this.form.coin])).encodeABI();return this.sendEthTx(Q,data).then((function(t){return e.$v.$reset(),e.form.address=e.$store.getters.address,e.form.amount="",e.form.coin="",e.isFormSending=!1,t}))},sendEthTx:function(t,data){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e.ethAddress,n.t1=t,n.t2=data,n.next=5,A.b.getTransactionCount(e.ethAddress,"pending");case 5:return n.t3=n.sent,r={from:n.t0,to:n.t1,data:n.t2,value:"0x00",nonce:n.t3},n.abrupt("return",H.sendTransaction(r));case 8:case"end":return n.stop()}}),n)})))()}}}}).call(this,n(6).Buffer)},835:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"h",(function(){return T})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return S})),n.d(e,"g",(function(){return E})),n.d(e,"f",(function(){return A})),n.d(e,"d",(function(){return j})),n.d(e,"e",(function(){return P}));n(63),n(88),n(1),n(9),n(55),n(57),n(62);var r=n(0),o=n(30),c=n(47),l=n.n(c),d=n(876),f=n(1054),m=n.n(f),h=n(760),v=n.n(h),_=n(780),y=n(10),C=n(900);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function $(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=5,T=v.a,O=new m.a(new d.Manager.providers.HttpProvider(y.j));function S(t,e){var n=Math.max(18-e,0);return t=new l.a(10).pow(new l.a(n)).mul(new l.a(t)).toString(),T.fromWei(t,"ether")}function E(t,e){t=T.toWei(t,"ether");var n=Math.max(18-e,0),r=new l.a(10).pow(new l.a(n));return new l.a(t).div(r).toString()}function A(t){var e=!1,n=new _.TinyEmitter,r=function t(r){return O.getTransaction(r).then((function(o){if(e)throw new Error("unsubscribed");return n.emit("tx",o),o.blockHash?o:k(1e4).then((function(){return t(r)}))}))}(t).then((function(e){return Promise.all([O.getTransactionReceipt(t),O.getBlock(e.blockNumber),l(e),Promise.resolve(e)])})).then((function(t){var e=Object(o.a)(t,4),r=e[0],l=e[1],d=e[2],f=$($($({},e[3]),r),{},{confirmations:d,timestamp:1e3*l.timestamp});if(n.emit("confirmation",f),!f.status)throw new Error("Transaction failed");return d>=w?f:c(f)})).then((function(t){return n.emit("confirmed",t),t}));return function(t,e){t.on=function(){return e.on.apply(e,arguments),t},t.once=function(){return e.once.apply(e,arguments),t}}(r,n),r.unsubscribe=function(){e=!0,n.off("tx"),n.off("confirmation"),n.off("confirmed")},r;function c(t){return k(1e4).then((function(){return l(t)})).then((function(r){if(e)throw new Error("unsubscribed");return t=$($({},t),{},{confirmations:r}),n.emit("confirmation",t),r>=w?t:c(t)}))}function l(t){return j().then((function(e){return e-t.blockNumber+1}))}}function k(time){return new Promise((function(t){setTimeout(t,time)}))}var L={isLoading:!1,timestamp:0,promise:null};function j(){if(L.isLoading)return L.promise;if(Date.now()-L.timestamp<5e3)return L.promise;var t=O.getBlockNumber();return L.isLoading=!0,L.promise=t,t.then((function(){L.isLoading=!1,L.timestamp=Date.now()})).catch((function(t){throw L.isLoading=!1,t})),t}var F={};function P(t){if(F[t])return F[t];var e=new O.Contract(C.a,t).methods.decimals().call().then((function(t){return Number(t)})).catch((function(e){return console.log(e),delete F[t],18}));return F[t]=e,e}},900:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],o=[{inputs:[{internalType:"bytes32",name:"_peggyId",type:"bytes32"},{internalType:"uint256",name:"_powerThreshold",type:"uint256"},{internalType:"address[]",name:"_validators",type:"address[]"},{internalType:"uint256[]",name:"_powers",type:"uint256[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToHubEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToMinterEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_batchNonce",type:"uint256"},{indexed:!0,internalType:"address",name:"_token",type:"address"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"TransactionBatchExecutedEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{indexed:!1,internalType:"address[]",name:"_validators",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"_powers",type:"uint256[]"}],name:"ValsetUpdatedEvent",type:"event"},{inputs:[{internalType:"address",name:"_erc20Address",type:"address"}],name:"lastBatchNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToHub",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"state_lastBatchNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastEventNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetCheckpoint",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_peggyId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_powerThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"},{internalType:"address[]",name:"_destinations",type:"address[]"},{internalType:"uint256[]",name:"_fees",type:"uint256[]"},{internalType:"uint256",name:"_batchNonce",type:"uint256"},{internalType:"address",name:"_tokenContract",type:"address"}],name:"submitBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_newValidators",type:"address[]"},{internalType:"uint256[]",name:"_newPowers",type:"uint256[]"},{internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"}],name:"updateValset",outputs:[],stateMutability:"nonpayable",type:"function"}]}}]);
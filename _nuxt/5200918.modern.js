(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1053:function(t,e){},1055:function(t,e){},1060:function(t,e){},1167:function(t,e,n){"use strict";n.r(e);var r=n(654),o=n(770).a,l=n(41),c={components:{HubBuyForm:Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-wrap"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                    "+t._s(t.$td("Buy","buy.title"))+"\n                ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n                    "+t._s(t.$td("Buy BIP or HUB for ETH","buy.description"))+"\n                ")])]),t._v(" "),n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("ETH")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Send","form.buy-send")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{readonly:t.isFormSending,$value:t.$v.form.amountEth,label:t.$td("Amount","form.hub-amount"),"max-value":t.maxAmount},model:{value:t.form.amountEth,callback:function(e){t.$set(t.form,"amountEth",e)},expression:"form.amountEth"}}),t._v(" "),t.$v.form.amountEth.$dirty&&!t.$v.form.amountEth.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):!t.$v.form.amountEth.$dirty||t.$v.form.amountEth.validAmount&&t.$v.form.amountEth.minValue?t.$v.form.amountEth.$dirty&&!t.$v.form.amountEth.enoughToPayFee?n("span",{staticClass:"form-field__error"},[t._v("Not enough to pay fee")]):t._e():n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{readonly:t.isFormSending,$value:t.$v.form.coinToGet,label:t.$td("Get","form.buy-get"),"coin-list":t.suggestionList,"fallback-to-full-list":!1},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinToGet,callback:function(e){t.$set(t.form,"coinToGet",e)},expression:"form.coinToGet"}}),t._v(" "),t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported to buy","form.buy-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--small--1-2 u-cell--xlarge--1-4"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.currentEstimation)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("Estimated amount to get")])]),t._v(" "),t.estimationError?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.estimationError))]):n("div",{staticClass:"form-field__help"},[t._v("\n                            "+t._s(t.$td("Depends on the network state and is subject to change","form.buy-amount-get-help"))+"\n                        ")])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"}),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-loading":t.isFormSending,"is-disabled":t.$v.$invalid}},[n("span",{staticClass:"button__content"},[t._v("Send")]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1)]),t._v(" "),t.serverError?n("div",{staticClass:"u-cell form__error send__text"},[t._v("\n                        "+t._s(t.serverError)+"\n                    ")]):t._e()])]),t._v(" "),n("div",{staticClass:"panel__section panel__section--tint"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.uniswapEstimation.price))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("ETH rate")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.uniswapEstimation.output))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("Uniswap output")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.coinAmountAfterBridge))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Bridge output")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.hubFee))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("\n                                "+t._s(t.$td("HUB fee","form.hub-withdraw-hub-fee"))+"\n                                ("+t._s(t.prettyRound(100*t.hubFeeRate))+"%)\n                            ")])])])])])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isFormSending,"hide-close-button":!0},on:{"update:isOpen":function(e){t.isFormSending=e},"update:is-open":function(e){t.isFormSending=e}}},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[t._t("confirm-modal-header",[n("h1",{staticClass:"panel__header-title"},[n("Loader",{staticClass:"panel__header-loader",attrs:{"is-loading":!0}}),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WAIT_ETH?[t._v("\n                                Waiting ETH deposit\n                            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SWAP_ETH?[t._v("\n                                Swapping ETH for "+t._s(t.$options.DEPOSIT_SYMBOL)+"\n                            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SEND_BRIDGE?[t._v("\n                                Sending "+t._s(t.$options.DEPOSIT_SYMBOL)+" to bridge\n                            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WAIT_BRIDGE?[t._v("\n                                Waiting "+t._s(t.$options.DEPOSIT_SYMBOL)+" from bridge\n                            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SWAP_MINTER?[t._v("\n                                Swapping "+t._s(t.$options.DEPOSIT_SYMBOL)+" for "+t._s(t.form.coinToGet)+"\n                            ")]:t._e()],2)])],2),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WAIT_ETH?[n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin u-text-left"},[n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed form-field--with-icon"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyExact(t.ethToTopUp))+" ETH")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Send")]),t._v(" "),n("ButtonCopyIcon",{staticClass:"form-field__icon form-field__icon--copy",attrs:{"copy-text":t.ethToTopUp.toString()}})],1)]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed form-field--with-icon"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.ethAddress))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("To the address")]),t._v(" "),n("ButtonCopyIcon",{staticClass:"form-field__icon form-field__icon--copy",attrs:{"copy-text":t.ethAddress}})],1)])])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:t.finishSending}},[t._v("\n                            Cancel\n                        ")])])]:t._e()],2)])],1)}),[],!1,null,null,null).exports},middleware(t){var{app:e,store:n}=t;n.commit("SET_SECTION_NAME",e.$td("Buy BIP and HUB","common.page-buy"))},head(){var title=Object(r.a)(this.$store.state.sectionName,this.$i18n.locale),t=this.$td("","buy.seo-description"),e="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:t},{hid:"og-description",name:"og:description",content:t},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-wallet").concat(e,".png")}]}},computed:{},methods:{}},d=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"u-section u-container"},[e("HubBuyForm")],1)}),[],!1,null,null,null);e.default=d.exports},644:function(t,e,n){"use strict";function r(t){return"SELECT"===t.nodeName.toUpperCase()}function o(t){l(t.target)}function l(t){setTimeout((()=>{t.value.length?t.classList.add("is-not-empty"):t.classList.remove("is-not-empty")}),0)}e.a={bind(t,e,n){l(t),r(t)?t.addEventListener("change",o):t.addEventListener("input",o),e.value&&t.addEventListener(e.value,o)},componentUpdated(t,e){l(t),e.oldValue!==e.value&&t.removeEventListener(e.oldValue,o),e.value&&t.addEventListener(e.value,o)},unbind(t,e){r(t)?t.removeEventListener("change",o):t.removeEventListener("input",o),e.value&&t.removeEventListener(e.value,o)}}},647:function(t,e,n){"use strict";var r={props:{isLoading:{type:Boolean,default:!1}}},o=(n(677),n(41)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("circle",{staticClass:"loader__path",attrs:{cx:"14",cy:"14",r:"12"}})]):t._e()}),[],!1,null,null,null);e.a=component.exports},651:function(t,e,n){"use strict";n.d(e,"h",(function(){return P})),n.d(e,"g",(function(){return B})),n.d(e,"f",(function(){return j})),n.d(e,"a",(function(){return N})),n.d(e,"c",(function(){return R})),n.d(e,"b",(function(){return U})),n.d(e,"d",(function(){return G})),n.d(e,"i",(function(){return V})),n.d(e,"j",(function(){return H})),n.d(e,"e",(function(){return X}));var r=n(24),o=(n(19),n(17),n(20),n(185)),l=n(62),c=n.n(l),d=n(639),m=n(182),f=n.n(m),h=n(704),v=n(715),_=n(694),y=n(695),T=n(707),E=n(709),w=n(698),C=n(716),S=n(689),x=n(692),O=(n(696),n(699)),A=n(2),$=n(47);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L=new h.a({apiType:"gate",baseURL:A.s,chainId:A.h,adapter:Object(d.a)(c.a.defaults.adapter,{enabledByDefault:!1})}),P=Object(v.b)(L),B=Object(_.a)(L),j=Object(y.a)(L),N=Object(v.a)(L),M=new f.a({maxAge:3e4}),F=(t,e)=>t.sellAll?Object(E.a)(L)(t,I({},e)):Object(T.a)(L)(t,I({},e)),D=(t,e)=>Object(w.a)(L)(t,I({},e));function R(t,e){if(!t.valueToSell||!Number(t.valueToSell))return Promise.reject(new Error("Value to sell not specified"));if(t.findRoute&&t.swapFrom!==S.c.BANCOR){var n,r=F(t,e).catch((t=>{n=t})),l=Object($.k)(t.coinToSell,t.coinToBuy,{sellAmount:t.valueToSell},e).catch((t=>{console.log(t)}));return Promise.all([r,l]).then((r=>{var[l,c]=r;if(n&&!c)throw n;var d=c&&n,m=l&&c&&new o.a(l.will_get).lt(c.amountOut)&&c.coins.length>2;if(d||m){var f=c.coins.map((t=>t.id));return f.pop(),f.shift(),Promise.all([F(I(I({},t),{},{route:f,swapFrom:S.c.POOL}),e),Promise.resolve(c.coins)]).then((t=>{var[e,n]=t;e=I(I({},e),{},{route:n});var r=l&&e&&new o.a(l.will_get).lt(e.will_get);return d||r?e:l}))}return l}))}return F(t,e)}function U(t,e){if(!t.valueToBuy||!Number(t.valueToBuy))return Promise.reject(new Error("Value to buy not specified"));if(t.findRoute&&t.swapFrom!==S.c.BANCOR){var n,r=D(t,e).catch((t=>{n=t})),l=Object($.k)(t.coinToSell,t.coinToBuy,{buyAmount:t.valueToBuy},e).catch((t=>{console.log(t)}));return Promise.all([r,l]).then((r=>{var[l,c]=r;if(n&&!c)throw n;var d=c&&n,m=l&&c&&new o.a(l.will_pay).gt(c.amountIn)&&c.coins.length>2;if(d||m){var f=c.coins.map((t=>t.id));return f.pop(),f.shift(),Promise.all([D(I(I({},t),{},{route:f,swapFrom:S.c.POOL}),e),Promise.resolve(c.coins)]).then((t=>{var[e,n]=t;e=I(I({},e),{},{route:n});var r=l&&e&&new o.a(l.will_pay).gt(e.will_pay);return d||r?e:l}))}return l}))}return D(t,e)}var G=(t,e)=>Object(C.a)(L)(t,{direct:!1},I(I({},e),{},{cache:M})),V=(new f.a({maxAge:6e4}),Object(x.b)(L)),H=Object(x.c)(L),W=new f.a({maxAge:36e5}),X=()=>Object(O.a)(L)({cache:W})},654:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2);function o(text,t){var e="ru"===t?"Консоль":"Console";return text?r.e+e+". "+text+r.d:r.e+e+r.d}},655:function(t,e,n){"use strict";var r=n(254),o=(n(186),n(682)),l=n(644),c=n(78),d=n(2),m=n(676),f=["input"];function h(t,e){return e===d.i.ANY||(e===d.i.ANY_TOKEN?t===d.i.TOKEN||t===d.i.POOL_TOKEN:t===e)}var v={ideFix:null,MAX_ITEM_COUNT:6,components:{VueSimpleSuggest:o.a,InputUppercase:m.a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:String,default:""},$value:{type:Object,required:!0},label:{type:String,required:!0},coinList:{type:Array,default:()=>[]},coinType:{type:String,default:d.i.ANY},fallbackToFullList:{type:Boolean,default:!0}},data:()=>({}),computed:{listeners(){var t=this.$listeners,{input:input}=t;return Object(r.a)(t,f)},useSpecifiedCoinList(){return!this.fallbackToFullList||this.coinList&&this.coinList.length},currentCoinList(){return this.useSpecifiedCoinList?this.coinList.filter((t=>"object"!=typeof t||h(t.coin.type,this.coinType))):this.$store.state.explorer.coinList.filter((t=>h(t.type,this.coinType))).map((t=>t.symbol))},maxSuggestions(){return this.useSpecifiedCoinList?100:6},verifiedMap(){var map={};return this.$store.state.explorer.coinList.forEach((t=>{t.verified&&(map[t.symbol]=!0)})),map}},watch:{currentCoinList(){var t=this.$refs.vss;t.canSend?t.research():t.getSuggestions(t.text).then((e=>{t.$set(t,"suggestions",e)}))}},methods:{getCoinIconUrl(t){return this.$store.getters["explorer/getCoinIcon"](t)},suggestionOrder(t){return t?this.currentCoinList.slice(0).sort(((a,b)=>a===t?-1:b===t?1:0)):this.currentCoinList},suggestionFilter(t,e){return!e||0===this.getSuggestionCoin(t).indexOf(e)},handleSuggestionClick(t,e){e.preventDefault()},getSuggestionCoin(t){var e;return(null===(e=t.coin)||void 0===e?void 0:e.symbol)||t},getSuggestionAmount(t){var e=t.value||t.amount;return e?"(".concat(Object(c.r)(e),")"):""},getIsVerified(t){var symbol=this.getSuggestionCoin(t);return this.verifiedMap[symbol]}}},_=n(41),component=Object(_.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error}},[n("VueSimpleSuggest",{ref:"vss",attrs:{value:t.value,list:t.suggestionOrder,"max-suggestions":t.maxSuggestions,"min-length":0,"filter-by-query":!0,filter:t.suggestionFilter,"display-attribute":"coin.symbol","value-attribute":"coin.symbol",destyled:!0,controls:{showList:[38,40]}},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)},"suggestion-click":t.handleSuggestionClick},scopedSlots:t._u([{key:"suggestion-item",fn:function(e){var r=e.suggestion;return n("div",{},[n("img",{staticClass:"suggestion__coin-icon",attrs:{src:t.getCoinIconUrl(t.getSuggestionCoin(r)),width:"20",height:"20",alt:"",role:"presentation"}}),t._v(" "),n("span",{staticClass:"suggestion__coin-symbol"},[t._v(t._s(t.getSuggestionCoin(r)))]),t._v(" "),t.getIsVerified(r)?n("img",{staticClass:"suggestion__coin-verified",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-verified.svg",alt:"Verified",width:"12",height:"12"}}):t._e(),t._v(" "),t.getSuggestionAmount(r)?n("span",[t._v(t._s(t.getSuggestionAmount(r)))]):t._e()])}}])},[n("InputUppercase",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",value:t.value}},"InputUppercase",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)],1)}),[],!1,null,null,null);e.a=component.exports},657:function(t,e,n){"use strict";var r={props:{isOpen:{type:Boolean,default:!1},hideCloseButton:{type:Boolean,default:!1},modalClass:{type:String,default:""},modalContainerClass:{type:String,default:""},keepMarkup:{type:Boolean,default:!1}},data:()=>({elFocusedBeforeOpen:null}),watch:{isOpen(t){t?(this.elFocusedBeforeOpen=document.activeElement,setTimeout((()=>{if("function"==typeof this.$el.querySelector){var t=this.$el.querySelector("[data-focus-on-open]");t&&t.focus()}}),0)):setTimeout((()=>{this.elFocusedBeforeOpen&&setTimeout((()=>{this.elFocusedBeforeOpen.focus(),this.elFocusedBeforeOpen=null}),0)}),0)}},methods:{closeModal(){this.$emit("update:isOpen",!1),this.$emit("modal-close")},handleModalClick(t){this.hideCloseButton||this.$refs.modalContainer&&t.target!==this.$refs.modalContainer&&!this.$refs.modalContainer.contains(t.target)&&this.closeModal()},handleModalKeydown(t){this.hideCloseButton||"Escape"!==t.code&&27!==t.keyCode||(t.preventDefault(),this.closeModal())}}},o=n(41),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"v-transition-modal"}},[t.isOpen||t.keepMarkup?n("div",{staticClass:"modal-wrap"},[n("transition",{attrs:{name:"v-transition-modal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||!t.keepMarkup,expression:"isOpen || !keepMarkup"}],staticClass:"modal u-container u-container--wide",class:t.modalClass,attrs:{tabindex:"-1",role:"dialog"},on:{click:t.handleModalClick,keydown:t.handleModalKeydown}},[t.hideCloseButton?t._e():n("button",{staticClass:"modal__close u-semantic-button link--opacity",attrs:{type:"button"}},[n("span",{staticClass:"modal__close-icon"},[t._v("Close")])]),t._v(" "),n("div",{staticClass:"modal__wrap"},[n("div",{ref:"modalContainer",staticClass:"modal__container",class:t.modalContainerClass},[t._t("default")],2)])])])],1):t._e()])}),[],!1,null,null,null);e.a=component.exports},659:function(t,e,n){"use strict";var r=n(254),o=(n(671),n(674)),l=["input"],c={ideFix:null,imaskAmount:{mask:Number,scale:18,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[","]},directives:{imask:o.a},props:{value:{type:[String,Number],default:""}},data:()=>({maskedValue:""}),computed:{listeners(){var t=this.$listeners,{input:input}=t;return Object(r.a)(t,l)}},watch:{value(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted(){this.updateMaskState(this.value)},methods:{updateMaskState(t){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}},onAcceptInput(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},d=n(41),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.$options.imaskAmount,expression:"$options.imaskAmount"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"decimal"},on:{accept:t.onAcceptInput}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},662:function(t,e,n){},668:function(t,e,n){"use strict";var r=n(685),o=n(675),l={components:{InlineSvg:r.a,ButtonCopy:o.a},props:{copyText:{type:String,required:!0}}},c=n(41),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ButtonCopy",{staticClass:"u-icon u-semantic-button link--opacity",attrs:{"aria-label":"Copy","copy-text":t.copyText}},[n("InlineSvg",{attrs:{src:t.BASE_URL_PREFIX+"/img/icon-copy.svg"}})],1)}),[],!1,null,null,null);e.a=component.exports},669:function(t,e,n){"use strict";n(5);var r=n(185),o=n(396),l=n(644),c=n(78);var d={components:{InputMaskedAmount:n(659).a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},maxValue:{type:[String,Number],default:void 0},addressBalance:{type:Array,default:()=>[]},selectedCoinSymbol:{type:String,default:""},fee:{type:[Object,null],default:null}},data:()=>({isUseMax:!1}),computed:{maxValueComputed(){var t,e;if(void 0!==this.maxValue)return this.maxValue;var n=this.addressBalance.find((t=>t.coin.symbol===this.selectedCoinSymbol));if(n){if(!function(t,e){var n=Object(o.h)(e);if(!n&&t.symbol===e)return!0;if(n&&t.id===e)return!0;return!1}(n.coin,null===(t=this.fee)||void 0===t?void 0:t.coin))return n.amount;var l=(null===(e=this.fee)||void 0===e?void 0:e.value)||0,c=new r.a(n.amount).minus(l).toString();return c>0?c:"0"}},isMaxValueDefined(){return void 0!==this.maxValueComputed&&this.maxValueComputed>0}},watch:{value(t){(t||0===t)&&this.isMaxValueDefined&&new r.a(t).eq(this.maxValueComputed)||(this.isUseMax=!1)},maxValueComputed(t){this.isMaxValueDefined&&this.isUseMax&&this.useMax()}},methods:{pretty:c.r,useMax(){if(!this.isMaxValueDefined)return!1;this.isUseMax=!0,this.$emit("input",this.maxValueComputed),this.$emit("use-max"),this.$value.$touch()}}},m=n(41),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error,"form-field--with-use-max":t.isMaxValueDefined}},[n("InputMaskedAmount",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal",value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}}},"InputMaskedAmount",t.$attrs,!1)),t._v(" "),t.isMaxValueDefined?n("button",{staticClass:"form-field__use-max link--main link--opacity u-semantic-button",attrs:{type:"button"},on:{click:t.useMax}},[t._v("Use max")]):t._e(),t._v(" "),t.isMaxValueDefined&&!t.isUseMax?n("span",{staticClass:"form-field__max-available"},[t._v("≈"+t._s(t.pretty(t.maxValueComputed)))]):t._e(),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null);e.a=component.exports},675:function(t,e,n){"use strict";var r=n(688),o={props:{copyText:{type:String,required:!0}},computed:{isClipboardSupported:()=>r.b()},methods:{copy(t){r.a(t)&&this.$store.commit("SET_SNACKBAR_ACTIVE")}}},l=n(41),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isClipboardSupported?n("button",{attrs:{type:"button"},on:{click:function(e){return t.copy(t.copyText)}}},[t._t("default")],2):t._e()}),[],!1,null,null,null);e.a=component.exports},676:function(t,e,n){"use strict";var r=n(254),o=["input","blur","focus"],l={props:{value:{type:String,default:""}},computed:{listeners(){var t=this.$listeners,{input:input,blur:e,focus:n}=t;return Object(r.a)(t,o)}},mounted:function(){this.updateValue(this.$refs.input.value)},methods:{updateValue:function(t){(t=t.toUpperCase())!==this.value&&this.$emit("input",t)}}},c=n(41),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({ref:"input",domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},677:function(t,e,n){"use strict";n(662)},706:function(t,e){},708:function(t,e){},718:function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"h",(function(){return w})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return S})),n.d(e,"g",(function(){return x})),n.d(e,"f",(function(){return O})),n.d(e,"d",(function(){return k})),n.d(e,"e",(function(){return L}));var r=n(24),o=(n(86),n(17),n(19),n(20),n(185)),l=n(771),c=n(777),d=n.n(c),m=n(680),f=n.n(m),h=n(259),v=n(2),_=n(738);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var E=5,w=f.a,C=new d.a(new l.Manager.providers.HttpProvider(v.k));function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=Math.max(18-e,0);return t=new o.a(10).pow(n).times(t).toFixed(0),w.fromWei(t,"ether")}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;t=new o.a(t).toFixed(Number(e)),t=w.toWei(t,"ether");var n=Math.max(18-e,0),r=new o.a(10).pow(n);return new o.a(t).div(r).toFixed(0)}function O(t){var e=!1,n=new h.TinyEmitter,r=function t(r){return C.getTransaction(r).then((o=>{if(e)throw new Error("unsubscribed");return o&&n.emit("tx",o),o&&o.blockHash?o:A(1e4).then((()=>t(r)))}))}(t).then((e=>Promise.all([C.getTransactionReceipt(t),C.getBlock(e.blockNumber),l(e),Promise.resolve(e)]))).then((t=>{var[e,r,l,c]=t,d=T(T(T({},c),e),{},{confirmations:l,timestamp:1e3*r.timestamp});if(n.emit("confirmation",d),!d.status)throw new Error("Transaction failed");return l>=E?d:o(d)})).then((t=>(n.emit("confirmed",t),t)));return function(t,e){t.on=function(){return e.on(...arguments),t},t.once=function(){return e.once(...arguments),t}}(r,n),r.unsubscribe=function(){e=!0,n.off("tx"),n.off("confirmation"),n.off("confirmed")},r;function o(t){return A(1e4).then((()=>l(t))).then((r=>{if(e)throw new Error("unsubscribed");return t=T(T({},t),{},{confirmations:r}),n.emit("confirmation",t),r>=E?t:o(t)}))}function l(t){return k().then((e=>e-t.blockNumber+1))}}function A(time){return new Promise((t=>{setTimeout(t,time)}))}var $={isLoading:!1,timestamp:0,promise:null};function k(){if($.isLoading)return $.promise;if(Date.now()-$.timestamp<5e3)return $.promise;var t=C.getBlockNumber();return $.isLoading=!0,$.promise=t,t.then((()=>{$.isLoading=!1,$.timestamp=Date.now()})).catch((t=>{throw $.isLoading=!1,t})),t}var I={};function L(t){if(I[t])return I[t];var e=new C.Contract(_.a,t).methods.decimals().call().then((t=>Number(t))).catch((e=>(console.log(e),delete I[t],18)));return I[t]=e,e}},738:function(t,e,n){"use strict";e.a=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}]},741:function(t,e,n){"use strict";var r=n(690),o=n(742),l=n(747),c=Math.max,d=Math.min;e.a=function(t,e,n){var m,f,h,v,_,y,T=0,E=!1,w=!1,C=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function S(time){var e=m,n=f;return m=f=void 0,T=time,v=t.apply(n,e)}function x(time){return T=time,_=setTimeout(A,e),E?S(time):v}function O(time){var t=time-y;return void 0===y||t>=e||t<0||w&&time-T>=h}function A(){var time=Object(o.a)();if(O(time))return $(time);_=setTimeout(A,function(time){var t=e-(time-y);return w?d(t,h-(time-T)):t}(time))}function $(time){return _=void 0,C&&m?S(time):(m=f=void 0,v)}function k(){var time=Object(o.a)(),t=O(time);if(m=arguments,f=this,y=time,t){if(void 0===_)return x(y);if(w)return clearTimeout(_),_=setTimeout(A,e),S(y)}return void 0===_&&(_=setTimeout(A,e)),v}return e=Object(l.a)(e)||0,Object(r.a)(n)&&(E=!!n.leading,h=(w="maxWait"in n)?c(Object(l.a)(n.maxWait)||0,e):h,C="trailing"in n?!!n.trailing:C),k.cancel=function(){void 0!==_&&clearTimeout(_),T=0,m=y=f=_=void 0},k.flush=function(){return void 0===_?v:$(Object(o.a)())},k.pending=function(){return void 0!==_},k}},770:function(t,e,n){"use strict";(function(t){var r,o,l,c,d=n(15),m=(n(17),n(19),n(20),n(56),n(12),n(5),n(86),n(645)),f=n(646),h=n.n(f),v=n(650),_=n.n(v),y=n(151),T=n.n(y),E=(n(687),n(656)),w=n(834),C=n(728),S=n(35),x=n(718),O=(n(783),n(257)),A=n(47),$=n(185),k=n(78),I=n(738),L=n(784),P=n(2),B=n(253),j=n(644),N=n(647),M=n(657),F=n(668),D=n(669),R=n(655),U=(n(795),n(829)),G=n.n(U),V=n(830),H=n(1142),W=n(1062),X=n(3),Y=(n(75),n(651)),K=n(62),z=n.n(K),J=n(741),Z=W.abi,Q="finished",tt="rejected",et="pending",nt={WAIT_ETH:"wait_eth",SWAP_ETH:"swap_eth",APPROVE_BRIDGE:"approve_bridge",SEND_BRIDGE:"send_bridge",WAIT_BRIDGE:"wait_bridge",SWAP_MINTER:"swap_minter"},it=2e5,st="Canceled";function at(t){return new x.b.Contract(I.a,t)}var ot=P.u,ut=new x.b.Contract(L.a,ot),lt=H.g[P.l],ct=P.B===P.y?"USDTE":"USDC",pt=T()({type:"validAmount"},(t=>parseFloat(t)>=0));e.a={TX_WRAP:"wrap",TX_APPROVE:"approve",TX_TRANSFER:"transfer",DEPOSIT_SYMBOL:ct,LOADING_STAGE:nt,components:{Loader:N.a,Modal:M.a,ButtonCopyIcon:F.a,FieldUseMax:D.a,FieldCoin:R.a},directives:{autosize:E.a,checkEmpty:j.a},mixins:[m.validationMixin],fetch(){return Promise.all([Object(O.b)(),Object(O.d)()]).then((t=>{var[e,n]=t;this.hubCoinList=e,this.priceList=n})).then((()=>{this.$nextTick((()=>{this.updateBalance(),this.getAllowance(),this.fetchUniswapPair()}))}))},data:()=>({coinToDepositBalance:0,ethBalance:0,uniswapPair:null,balanceRequest:null,coinToDepositUnlocked:0,allowanceRequest:null,form:{amountEth:"",coinToGet:"",amountToGet:""},hubCoinList:[],priceList:[],transactionList:[],loadingStage:"",isFormSending:!1,serverError:"",isConnectionStartedAndModalClosed:!1,estimation:null,estimationRoute:null,isEstimationLoading:!1,estimationError:!1,isEstimationPending:!1,debouncedGetEstimation:null}),validations(){return{form:{amountEth:{required:h(),validAmount:pt,minValue:t=>t>0,enoughToPayFee:t=>t>=this.ethTotalFee},coinToGet:{required:h(),minLength:_()(3),supported:symbol=>this.suggestionList.includes(symbol)},amountToGet:{}}}},computed:{ethAddress(){return this.$store.getters.address.replace("Mx","0x")},ethGasPriceGwei(){var t=this.priceList.find((t=>"eth/gas"===t.name));return t?t.value/10:100},ethTotalFee(){var t=this.isCoinApproved?0:75e3,e=it+t+75e3,n=x.h.fromWei(x.h.toWei(this.ethGasPriceGwei.toString(),"gwei"),"ether");return new $.a(n).times(e).toString()},ethToTopUp(){var t=new $.a(this.form.amountEth||0).minus(this.ethBalance);return t=t.gt(0)?t.toString():0},ethToSwap(){var t=new $.a(this.form.amountEth||0).minus(this.ethTotalFee);return t=t.gt(0)?t.toString():0},uniswapEstimation(){var t=this.uniswapPair,e=this.coinDecimals,n=Object(x.g)(this.ethToSwap,18);if(!(t&&n>0))return{price:0,output:0};try{var r=new H.b([t],lt),o=new H.e(r,new H.d(lt,n),H.f.EXACT_INPUT);return{price:o.executionPrice.toFixed(e),output:o.outputAmount.toFixed(e)}}catch(t){return console.log(t),{price:0,output:0}}},hubFeeRate(){var t=this.hubCoinList.find((t=>t.symbol===ct));return(null==t?void 0:t.customCommission)||.01},hubFee(){var t;return new $.a((null===(t=this.uniswapEstimation)||void 0===t?void 0:t.output)||0).times(this.hubFeeRate).toString()},coinAmountAfterBridge(){var t;return new $.a((null===(t=this.uniswapEstimation)||void 0===t?void 0:t.output)||0).minus(this.hubFee).toString()},maxAmount(){return this.ethBalance},coinContractAddress(){var t=this.hubCoinList.find((t=>t.symbol===ct));return t?t.ethAddr:void 0},coinDecimals(){if(this.coinContractAddress){var t=this.hubCoinList.find((t=>t.ethAddr===this.coinContractAddress));return t?Number(t.ethDecimals):void 0}},isCoinApproved(){return new $.a(this.coinToDepositUnlocked).gt(1e15)},suggestionList(){return[this.$store.getters.BASE_COIN,"HUB"]},currentEstimation(){return this.$v.form.$invalid||!this.estimation||this.isEstimationWaiting||this.estimationError?0:this.estimation},isEstimationWaiting(){return this.isEstimationPending||this.isEstimationLoading},isEstimationErrorVisible(){return this.estimationError&&!this.isEstimationWaiting}},watch:{"form.coinToGet":{handler(){this.watchEstimation()}},coinAmountAfterBridge:{handler(){this.watchEstimation()}}},mounted(){this.debouncedGetEstimation=Object(J.a)(this.getEstimation,1e3),l=setInterval((()=>{this.isFormSending||(this.updateBalance(),this.getAllowance(),this.fetchUniswapPair())}),6e4),c=setInterval((()=>{this.isFormSending||Object(O.d)().then((t=>{this.priceList=t}))}),15e3)},destroyed(){clearInterval(l),clearInterval(c)},methods:{pretty:k.r,prettyPrecise:k.u,prettyExact:k.s,prettyRound:k.w,updateBalance(){var t;if(!this.coinContractAddress)return Promise.reject();if((null===(t=this.balanceRequest)||void 0===t?void 0:t.promiseStatus)===et)return this.balanceRequest.promise;var e=Promise.all([Promise.resolve(0),x.b.getBalance(this.ethAddress)]).then((t=>{var[n,r]=t;this.ethBalance=x.h.fromWei(r),this.balanceRequest={promiseStatus:Q,promise:e}})).catch((t=>{console.log(t),this.balanceRequest={promiseStatus:tt,promise:e},this.serverError="Can't get balance"}));return e},getAllowance(){var t;if(this.coinContractAddress&&(null===(t=this.allowanceRequest)||void 0===t?void 0:t.promiseStatus)!==et){var e=at(this.coinContractAddress).methods.allowance(this.ethAddress,ot).call().then((t=>{this.coinToDepositUnlocked=Object(x.c)(t,this.coinDecimals),this.allowanceRequest={promiseStatus:Q,promise:e}})).catch((t=>{console.log(t),this.coinToDepositUnlocked=0,this.allowanceRequest={promiseStatus:tt,promise:e},this.serverError="Can't get allowance"}));return this.allowanceRequest={promiseStatus:et,promise:e},e}},fetchUniswapPair(){var t,e,n,r;this.coinContractAddress&&this.coinDecimals&&(t=this.coinContractAddress,e=this.coinDecimals,n=new H.c(P.l,t,e),r=P.B===P.y?new w.a("homestead"):new C.a(P.k,"ropsten"),H.a.fetchPairData(n,lt,r).then((t=>(window.pr=t,Object.freeze(t))))).then((t=>{this.uniswapPair=t}))},waitEnoughEth(){return this.ethBalance>=this.form.amountEth?Promise.resolve():(this.loadingStage=nt.WAIT_ETH,new Promise(((t,e)=>{var n={value:!1};o=()=>{e(new Error(st)),n.value=!0,o=null},this._waitEnoughEth(n).then(t).catch(e)})))},_waitEnoughEth(t){return this.updateBalance().then((()=>{return t.value?Promise.reject(new Error(st)):this.ethBalance>=this.form.amountEth||(time=1e4,new Promise((t=>{setTimeout(t,time)}))).then((()=>this._waitEnoughEth(t)));var time}))},submit(){if(!this.isFormSending){if(!this.$v.$invalid)return this.isFormSending=!0,this.serverError="",this.waitEnoughEth().then((()=>this.depositFromEthereum())).then((t=>{if(t.status!==P.w.batch_executed)throw new Error("Unsuccessful bridge transfer: ".concat(t.status));return console.log({transfer:t}),Object(A.l)(t.outTxHash)})).then((t=>{if(console.log("minterTx"),console.log(t),!t.data.list)throw new Error("Minter tx transfer has invalid data");var e=t.data.list.find((t=>t.to===this.$store.getters.address&&t.coin.symbol===ct));if(!e)throw new Error("Minter tx transfer does not include ".concat(ct," deposit to the current user"));var n=e.value;return this.loadingStage=nt.SWAP_MINTER,this.sendMinterSwapTx(n)})).then((()=>{this.$v.$reset(),this.form.amountEth="",this.form.coinToGet="",this.form.amountToGet="",this.finishSending()})).catch((t=>{t.message!==st&&(this.serverError=Object(B.a)(t),console.error(t)),this.finishSending()}));this.$v.$touch()}},finishSending(){this.isFormSending=!1,"function"==typeof o&&o(),this.$fetch()},depositFromEthereum(){var t=this;return Object(d.a)((function*(){t.loadingStage=nt.SWAP_ETH;var e=yield x.b.getTransactionCount(t.ethAddress,"pending"),n=t.sendUniswapTx({nonce:e,gasPrice:t.ethGasPriceGwei});t.isCoinApproved||(e+=1,t.sendApproveTx({nonce:e,gasPrice:t.ethGasPriceGwei+1}));var r=yield n.then((t=>{var e=t.logs[4].data.slice(130,194);return x.b.abi.decodeParameter("uint256","0x"+e)}));t.loadingStage=nt.SEND_BRIDGE;var o=yield t.sendCoinTx({amount:r,nonce:e+1});return t.loadingStage=nt.WAIT_BRIDGE,Object(O.e)(o.transactionHash)}))()},sendUniswapTx(){var{nonce:t,gasPrice:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.uniswapPair.liquidityToken.address,r=new x.b.Contract(Z,n),o=Object(x.g)(new $.a(this.uniswapEstimation.output).times(.97).toString(),this.coinDecimals),l=Math.floor(Date.now()/1e3)+1800,data=r.methods.swapExactETHForTokens(o,[lt.address,this.coinContractAddress],this.ethAddress,l).encodeABI();return this.sendEthTx({to:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",data:data,value:this.ethToSwap,nonce:t,gasPrice:e,gasLimit:it})},sendApproveTx(){var{nonce:t,gasPrice:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=at(this.coinContractAddress).methods.approve(ot,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").encodeABI();return this.sendEthTx({to:this.coinContractAddress,data:data,nonce:t,gasPrice:e,gasLimit:75e3})},sendCoinTx(e){var address,{amount:n,nonce:r}=e;address=t.concat([t.alloc(12),t.from(x.h.hexToBytes(this.$store.getters.address.replace("Mx","0x")))]);var data=ut.methods.sendToMinter(this.coinContractAddress,address,n).encodeABI();return this.sendEthTx({to:ot,data:data,nonce:r,gasLimit:75e3})},sendEthTx(t){var e=this;return Object(d.a)((function*(){var{to:n,value:r,data:data,nonce:o,gasPrice:l}=t,c=yield e.estimateTxGas({to:n,value:r,data:data});console.log("gas",c,{nonce:o,to:n,value:r});var d={to:n,value:r?x.h.toHex(Object(x.g)(r,18)):"0x00",data:data,nonce:o||(yield x.b.getTransactionCount(e.ethAddress,"pending")),gasPrice:x.h.toHex(x.h.toWei((l||1).toString(),"gwei")),gasLimit:x.h.toHex(2e5)},m=new V.Transaction(d,{common:new G.a({chain:P.B===P.y?"mainnet":"ropsten"})}),f="0x"+(m=m.sign(Object(S.i)(e.$store.getters.privateKey))).serialize().toString("hex");return x.b.sendSignedTransaction(f).on("transactionHash",(t=>{console.log(t)})).on("receipt",(function(t){console.log("receipt:",t)})).on("error",(function(t){console.log(t)}))}))()},estimateTxGas(t){var{to:e,value:n,data:data}=t,r={from:this.ethAddress,to:e,value:n?Object(x.g)(n):"0x00",data:data};return x.b.estimateGas(r)},sendMinterSwapTx(t){return this.forceEstimation().then((()=>{var e={type:X.a.SELL_SWAP_POOL,data:{coins:this.estimationRoute?this.estimationRoute.map((t=>t.id)):[ct,this.form.coinToGet],valueToSell:t,minimumValueToBuy:0}};return Object(Y.h)(e,{privateKey:this.$store.getters.privateKey})}))},inputBlur(){this.debouncedGetEstimation.pending()&&this.debouncedGetEstimation.flush()},watchEstimation(){this.$store.getters.isOfflineMode||this.$v.form.$invalid||(this.debouncedGetEstimation(),this.isEstimationPending=!0)},getEstimation(){if(this.isEstimationPending=!1,this.isEstimationLoading&&"function"==typeof r&&r(st),!this.$store.getters.isOfflineMode&&!this.$v.form.$invalid)return this.isEstimationLoading=!0,this.estimationError=!1,Object(Y.c)({coinToSell:ct,valueToSell:this.coinAmountAfterBridge,coinToBuy:this.form.coinToGet,swapFrom:P.E.POOL,findRoute:!0},{cancelToken:new z.a.CancelToken((t=>r=t))}).then((t=>{this.estimation=t.will_get,this.estimationRoute=t.route,this.isEstimationLoading=!1})).catch((t=>{t.message!==st&&(this.isEstimationLoading=!1,this.estimationError=Object(B.a)(t,"Estimation error: "))}))},forceEstimation(){return this.debouncedGetEstimation(),this.debouncedGetEstimation.flush()}}}}).call(this,n(4).Buffer)},783:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(62),o=n.n(r),l=n(2),c=n(83),d=o.a.create({baseURL:l.n,params:{apikey:l.m}});function m(address,t){return d.get("?module=account&action=txlist&address=".concat(address,"&sort=desc"),{params:t}).then((t=>{var e={};return t.data.result.filter((t=>!e[t.hash]&&(e[t.hash]=!0,!0))).map((t=>(t.status=!!Number(t.txreceiptStatus),t)))}))}Object(c.a)(d)},784:function(t,e,n){"use strict";e.a=[{inputs:[{internalType:"bytes32",name:"_peggyId",type:"bytes32"},{internalType:"uint256",name:"_powerThreshold",type:"uint256"},{internalType:"address[]",name:"_validators",type:"address[]"},{internalType:"uint256[]",name:"_powers",type:"uint256[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToHubEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToMinterEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_batchNonce",type:"uint256"},{indexed:!0,internalType:"address",name:"_token",type:"address"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"TransactionBatchExecutedEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{indexed:!1,internalType:"address[]",name:"_validators",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"_powers",type:"uint256[]"}],name:"ValsetUpdatedEvent",type:"event"},{inputs:[{internalType:"address",name:"_erc20Address",type:"address"}],name:"lastBatchNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToHub",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"state_lastBatchNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastEventNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetCheckpoint",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_peggyId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_powerThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"},{internalType:"address[]",name:"_destinations",type:"address[]"},{internalType:"uint256[]",name:"_fees",type:"uint256[]"},{internalType:"uint256",name:"_batchNonce",type:"uint256"},{internalType:"address",name:"_tokenContract",type:"address"}],name:"submitBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_newValidators",type:"address[]"},{internalType:"uint256[]",name:"_newPowers",type:"uint256[]"},{internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"}],name:"updateValset",outputs:[],stateMutability:"nonpayable",type:"function"}]},795:function(t,e,n){"use strict";var r=n(15),o=n(718),l=n(257),c=n(78),d=n(647),m=n(2),f={NOT_FOUND:"not_found",LOADING:"loading",PENDING:"pending",RECEIPT:"receipt",CONFIRMED:"confirmed",CONFIRMED_NOT_FINAL:"confirmed_not_final",FAILED:"failed"},h="Send",v="Unlock",_="Wrap",y="Other",T={TX_STATUS:f,HUB_TRANSFER_STATUS:m.w,components:{Loader:d.a},props:{hash:{type:String,required:!0},coinList:{type:Array,default:()=>[]}},fetch(){this.isLoading=!0,Object(o.d)(),this.txWatcher=Object(o.f)(this.hash).once("tx",(t=>{this.tx=t,this.tokenInfoPromise=this.getTokenInfo(t).then((t=>{this.tokenInfo=t,this.isLoading=!1})).catch((t=>{console.log(t)}))})).once("confirmation",(t=>{this.tx=t})).then((t=>(this.tx=t,t))).catch((t=>{"unsubscribed"!==t.message&&console.log(t)})),this.txWatcher.then((t=>{this.tokenInfoPromise.then((()=>{this.tokenInfo.type===h&&(this.transferWatcher=Object(l.e)(t.hash).on("update",(t=>{this.transfer=t})).catch((t=>{"unsubscribed"!==t.message&&console.log(t)})))}))}))},data:()=>({isLoading:!0,tx:null,tokenInfo:null,tokenInfoPromise:null,txWatcher:null,transfer:null,transferWatcher:null}),computed:{timeDistance(){var t;return Object(c.n)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},time(){var t;return Object(c.o)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},txStatus(){if(!this.tx)return f.NOT_FOUND;if(this.tx.blockHash&&!this.tx.confirmations)return f.LOADING;if(!this.tx.blockHash)return f.PENDING;if(!1===this.tx.status)return f.FAILED;var t=this.tokenInfo.type===h?o.a:1;return this.tx.confirmations>=t?this.tokenInfo.type===h?f.CONFIRMED_NOT_FINAL:f.CONFIRMED:f.RECEIPT},status(){var t;return null!==(t=this.transfer)&&void 0!==t&&t.status&&this.transfer.status!==m.w.not_found?this.transfer.status:this.txStatus},isFinished(){var t;return Object(c.q)(null===(t=this.transfer)||void 0===t?void 0:t.status)&&this.txStatus===f.CONFIRMED_NOT_FINAL||this.txStatus===f.CONFIRMED||this.txStatus===f.FAILED||this.txStatus===f.NOT_FOUND},symbol(){if(!this.tokenInfo)return"";var t=this.coinList.find((t=>t.ethAddr===this.tokenInfo.tokenContract));return t?t.symbol:""},isInfiniteUnlock(){return!!this.tokenInfo&&(this.tokenInfo.type===v&&this.tokenInfo.amount>10**18)}},destroyed(){var t,e;"function"==typeof(null===(t=this.txWatcher)||void 0===t?void 0:t.unsubscribe)&&this.txWatcher.unsubscribe(),"function"==typeof(null===(e=this.transferWatcher)||void 0===e?void 0:e.unsubscribe)&&this.transferWatcher.unsubscribe()},methods:{pretty:c.r,getEtherscanTxUrl:c.f,getExplorerTxUrl:c.k,formatHash:t=>Object(c.x)(t,13),getTokenInfo:t=>Object(r.a)((function*(){var e,n,l,input=t.input.slice(10),c=input.length/64;if(2===c)e=v,n=t.to,l=yield f(input.slice(64*(c-1)),n);else if(t.to.toLowerCase()===m.u.toLowerCase()&&3===c){e=h;var d="0x"+input.slice(0,64);n=o.b.abi.decodeParameter("address",d),l=yield f(input.slice(64*(c-1)),n)}else{if(t.to.toLowerCase()!==m.G.toLowerCase()||0!==c)return{type:y};e=_,n=t.to,l=o.h.fromWei(t.value)}function f(t,e){return T.apply(this,arguments)}function T(){return(T=Object(r.a)((function*(t,e){var n="0x"+t,r=yield Object(o.e)(e);return Object(o.c)(o.b.abi.decodeParameter("uint256",n),r)}))).apply(this,arguments)}return{type:e,tokenContract:n,amount:l}}))()}},E=n(41),component=Object(E.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("div",{staticClass:"preview__transaction"},[n("div",{staticClass:"hub__preview-transaction-row u-text-overflow"},[n("div",[n("a",{staticClass:"link--main",attrs:{href:t.getEtherscanTxUrl(t.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.hash)))])]),t._v(" "),t.tokenInfo?n("div",{staticClass:"u-fw-700"},[t.isInfiniteUnlock?[t._v("Infinite unlock "+t._s(t.symbol))]:[t._v(t._s(t.tokenInfo.type)+" "+t._s(t.pretty(t.tokenInfo.amount))+" "+t._s(t.symbol))]],2):t._e()]),t._v(" "),n("div",{staticClass:"hub__preview-transaction-row hub__preview-transaction-meta"},[n("div",[t.tx.timestamp?[t._v(t._s(t.timeDistance)+" ago ("+t._s(t.time)+")")]:t._e()],2),t._v(" "),n("div",[t.status===t.$options.TX_STATUS.LOADING?[t._v("Loading")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.PENDING?[t._v("Pending")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.RECEIPT?[t._v("Received, waiting confirmations")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED?[t._v("Confirmed")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED_NOT_FINAL?[t._v("Confirmed, waiting for bridge")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.deposit_to_hub_received?[t._v("Bridge collecting batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_created?[t._v("Bridge created batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_executed?[t._v("\n                Success\n                "),n("a",{staticClass:"link--main",attrs:{href:t.getExplorerTxUrl(t.transfer.outTxHash),target:"_blank"}},[t._v(t._s(t.formatHash(t.transfer.outTxHash)))])]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.refund?[t._v("Refunded")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.FAILED?n("span",{staticClass:"u-text-error"},[t._v("Failed")]):t._e(),t._v(" "),n("Loader",{staticClass:"hub__preview-loader",attrs:{"is-loading":!t.isFinished}})],2)])])}),[],!1,null,null,null);e.a=component.exports},806:function(t,e){},809:function(t,e){}}]);
/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1164:function(t,e,o){"use strict";o.r(e);o(1),o(24);var n=o(753),r=o(0),l=o(30),c=(o(34),o(39),o(33),o(119),o(47),o(37),o(32),o(60),o(16),o(63),o(110)),m=o.n(c),d=o(737),f=o(738),v=o.n(f),_=o(739),h=o.n(_),y=o(5),C=o(750),T=o(80),E=(o(67),o(780)),$=o(831),O=o(853),x=Math.max,P=Math.min;var w,A=function(t,e,o){var n,r,l,c,m,d,f=0,v=!1,_=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(time){var e=n,o=r;return n=r=void 0,f=time,c=t.apply(o,e)}function C(time){return f=time,m=setTimeout(w,e),v?y(time):c}function T(time){var t=time-d;return void 0===d||t>=e||t<0||_&&time-f>=l}function w(){var time=Object($.a)();if(T(time))return A(time);m=setTimeout(w,function(time){var t=e-(time-d);return _?P(t,l-(time-f)):t}(time))}function A(time){return m=void 0,h&&n?y(time):(n=r=void 0,c)}function k(){var time=Object($.a)(),t=T(time);if(n=arguments,r=this,d=time,t){if(void 0===m)return C(d);if(_)return clearTimeout(m),m=setTimeout(w,e),y(d)}return void 0===m&&(m=setTimeout(w,e)),c}return e=Object(O.a)(e)||0,Object(E.a)(o)&&(v=!!o.leading,l=(_="maxWait"in o)?x(Object(O.a)(o.maxWait)||0,e):l,h="trailing"in o?!!o.trailing:h),k.cancel=function(){void 0!==m&&clearTimeout(m),f=0,n=d=r=m=void 0},k.flush=function(){return void 0===m?c:A(Object($.a)())},k.pending=function(){return void 0!==m},k},k=o(735),L=o(326),F=o(103),S=o(7),B=o(756),R=o(744),N=o(746),V=o(765),M=o(752),j=o(748);function Y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D,W="Cancel previous request",z={TX_TYPE:y.a,CONVERT_TYPE:S.i,components:{BaseAmount:B.a,TxForm:R.a,FieldCoin:N.a,FieldUseMax:V.a,InputMaskedAmount:M.a,Loader:j.a},directives:{checkEmpty:k.a},mixins:[d.validationMixin],fetch:function(){var t=this;return Promise.all([Object(T.d)(),Object(T.j)()]).then((function(e){var o=Object(l.a)(e,2),n=o[0],r=o[1],c=n.filter((function(t){return t.type===S.h.COIN||!!r.find((function(e){return e.id===t.id}))}));t.tradableCoinList=c.map((function(t){return t.symbol}))}))},data:function(){return{form:{sellAmount:"",coinFrom:"",coinTo:"",minimumValueToBuy:""},estimation:null,estimationType:null,estimationRoute:null,isEstimationLoading:!1,estimationError:!1,isEstimationPending:!1,debouncedGetEstimation:null,selectedConvertType:S.i.OPTIMAL,txForm:{},addressBalance:[],tradableCoinList:[]}},validations:function(){return{form:{sellAmount:{required:v.a},coinFrom:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)},coinTo:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)}},isEstimationWaiting:{nothingToWait:function(t){return!t}}}},computed:{preConvertType:function(){return this.selectedConvertType===S.i.POOL_DIRECT?S.i.POOL:this.selectedConvertType},convertType:function(){return this.preConvertType===S.i.OPTIMAL?this.estimationType:this.preConvertType},txType:function(){return this.convertType===S.i.POOL?y.a.SELL_SWAP_POOL:y.a.SELL},txData:function(){return I(I({},this.txType===y.a.SELL?{coinToSell:this.form.coinFrom,coinToBuy:this.form.coinTo}:{coins:this.estimationRoute?this.estimationRoute.map((function(t){return t.id})):[this.form.coinFrom,this.form.coinTo]}),{},{valueToSell:this.form.sellAmount,minimumValueToBuy:this.form.minimumValueToBuy||this.slippageAmount||void 0})},tradableAddressBalance:function(){var t=this;return this.addressBalance.filter((function(e){return t.tradableCoinList.find((function(t){return e.coin.symbol===t}))}))},slippageAmount:function(){return.95*this.currentEstimation},currentEstimation:function(){return this.$v.form.$invalid||!this.estimation||this.isEstimationWaiting||this.estimationError?0:this.estimation},isEstimationWaiting:function(){return this.isEstimationPending||this.isEstimationLoading},isEstimationErrorVisible:function(){return this.estimationError&&!this.isEstimationWaiting}},watch:{"form.sellAmount":function(){this.watchForm()},"form.coinFrom":function(){this.watchForm()},"form.coinTo":function(){this.watchForm()},selectedConvertType:function(){this.debouncedGetEstimation(),this.debouncedGetEstimation.flush()}},created:function(){this.debouncedGetEstimation=A(this.getEstimation,1e3)},methods:{pretty:F.p,prettyExact:F.q,inputBlur:function(){this.debouncedGetEstimation.pending()&&this.debouncedGetEstimation.flush()},watchForm:function(){this.$store.getters.isOfflineMode||this.$v.form.$invalid||(this.debouncedGetEstimation(),this.isEstimationPending=!0)},getEstimation:function(){var t=this;if(this.isEstimationPending=!1,this.isEstimationLoading&&"function"==typeof w&&w(W),!this.$store.getters.isOfflineMode&&!this.$v.form.$invalid)return this.isEstimationLoading=!0,this.estimationError=!1,Object(C.c)({coinToSell:this.form.coinFrom,valueToSell:this.form.sellAmount,coinToBuy:this.form.coinTo,swapFrom:this.preConvertType,findRoute:this.selectedConvertType!==S.i.POOL_DIRECT,gasCoin:this.txForm.gasCoin||0},{cancelToken:new m.a.CancelToken((function(t){return w=t}))}).then((function(e){t.estimation=e.will_get,t.estimationType=e.swap_from,t.estimationRoute=e.route,t.isEstimationLoading=!1})).catch((function(e){e.message!==W&&(t.isEstimationLoading=!1,t.estimationError=Object(L.a)(e,"Estimation error: "))}))},clearForm:function(){this.form.sellAmount="",this.form.coinFrom="",this.form.coinTo="",this.form.minimumValueToBuy="",this.$v.$reset(),this.selectedConvertType=S.i.OPTIMAL}}},G=o(59),U=Object(G.a)(z,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("TxForm",{attrs:{"data-test-id":"convertSell",txData:t.txData,$txData:t.$v,txType:t.txType},on:{"update:addressBalance":function(e){t.addressBalance=e},"update:txForm":function(e){t.txForm=e},"clear-form":function(e){return t.clearForm()}},scopedSlots:t._u([{key:"panel-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[t._v("\n            "+t._s(t.$td("Sell coins","convert.sell-title"))+"\n        ")]),t._v(" "),o("p",{staticClass:"panel__header-description"},[t._v("\n            "+t._s(t.$td("Choose one of the coins that you own and specify the amount you would like to sell.","convert.sell-description"))+"\n        ")])]},proxy:!0},{key:"default",fn:function(e){var n=e.fee,r=e.addressBalance;return[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-check-label"},[t._v("Swap type")]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.OPTIMAL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.OPTIMAL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.OPTIMAL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Auto","form.convert-type-auto")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.BANCOR,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.BANCOR)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.BANCOR}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Reserves","form.convert-type-bancor")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Pools","form.convert-type-pool")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL_DIRECT,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL_DIRECT)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL_DIRECT}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Direct pool","form.convert-type-pool-direct")))])])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("FieldCoin",{attrs:{"data-test-id":"convertSellInputSellCoin",$value:t.$v.form.coinFrom,label:t.$td("Coin to sell","form.convert-sell-coin-sell"),"coin-list":t.tradableAddressBalance},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinFrom,callback:function(e){t.$set(t.form,"coinFrom","string"==typeof e?e.trim():e)},expression:"form.coinFrom"}}),t._v(" "),t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("FieldUseMax",{attrs:{"data-test-id":"convertSellInputSellAmount",$value:t.$v.form.sellAmount,label:t.$td("Sell amount","form.convert-sell-amount"),"selected-coin-symbol":t.form.coinFrom,fee:n,"address-balance":r},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.sellAmount,callback:function(e){t.$set(t.form,"sellAmount",e)},expression:"form.sellAmount"}}),t._v(" "),t.$v.form.sellAmount.$dirty&&!t.$v.form.sellAmount.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("FieldCoin",{attrs:{"data-test-id":"convertSellInputBuyCoin",$value:t.$v.form.coinTo,label:t.$td("Coin to get","form.convert-sell-coin-get"),"coin-list":t.tradableCoinList},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinTo,callback:function(e){t.$set(t.form,"coinTo","string"==typeof e?e.trim():e)},expression:"form.coinTo"}}),t._v(" "),t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[t.$store.getters.isOfflineMode?t._e():o("div",{staticClass:"form-field form-field--dashed",class:{"is-error":t.isEstimationErrorVisible}},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.currentEstimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get approximately","form.convert-sell-receive-estimation")))]),t._v(" "),o("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isEstimationWaiting}}),t._v(" "),t.isEstimationErrorVisible?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.estimationError))]):t._e()],1)]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("label",{staticClass:"form-field"},[o("InputMaskedAmount",{directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal"},model:{value:t.form.minimumValueToBuy,callback:function(e){t.$set(t.form,"minimumValueToBuy",e)},expression:"form.minimumValueToBuy"}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Min amount to get (optional)","form.convert-sell-min")))])],1),t._v(" "),o("div",{staticClass:"form-field__help"},[t._v("\n                "+t._s(t.$td("Default:","form.help-default"))+" "+t._s(t.slippageAmount?t.pretty(t.slippageAmount):0)+"\n            ")])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2 u-hidden-medium-down"})]}},{key:"submit-title",fn:function(){return[t._v("\n        "+t._s(t.$td("Sell","form.convert-sell-button"))+"\n    ")]},proxy:!0},{key:"confirm-modal-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[o("img",{staticClass:"panel__header-title-icon",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-feature-convert.svg",alt:"",role:"presentation",width:"40",height:"40"}}),t._v("\n            "+t._s(t.$td("Convert coins","convert.convert-title"))+"\n        ")])]},proxy:!0},{key:"confirm-modal-body",fn:function(){return[o("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin u-text-left"},[o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.form.sellAmount,exact:!0}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will send","form.convert-sell-confirm-send")))])],1)]),t._v(" "),t.estimation?o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.estimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get approximately *","form.convert-sell-confirm-receive-estimation")))])],1),t._v(" "),o("div",{staticClass:"form-field__help u-text-left"},[t._v("\n                    "+t._s(t.$td("* The result amount depends on the current rate at the time of the exchange and may differ from the above.","form.convert-confirm-note"))+"\n                ")])]):o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.form.coinTo}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get","form.convert-sell-confirm-receive")))])])]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.txData.minimumValueToBuy,exact:!0}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Min amount to get","form.convert-sell-confirm-min")))])],1)]),t._v(" "),t.estimation?[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.estimation/t.form.sellAmount}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinFrom)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.form.sellAmount/t.estimation}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinTo)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)])]:t._e(),t._v(" "),t.estimationRoute?o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.estimationRoute.map((function(t){return t.symbol})).join(" > ")}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap route","form.convert-route")))])])]):t._e(),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                        "+t._s(t.convertType===t.$options.CONVERT_TYPE.POOL?"Pools":"Reserves")+"\n                    ")]),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap type","form.convert-type")))])])])],2)]},proxy:!0}])})}),[],!1,null,null,null).exports;function X(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function H(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?X(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):X(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var J,Z="Cancel previous request",K={TX_TYPE:y.a,CONVERT_TYPE:S.i,components:{BaseAmount:B.a,TxForm:R.a,FieldCoin:N.a,InputMaskedAmount:M.a,Loader:j.a},directives:{checkEmpty:k.a},mixins:[d.validationMixin],fetch:function(){var t=this;return Promise.all([Object(T.d)(),Object(T.j)()]).then((function(e){var o=Object(l.a)(e,2),n=o[0],r=o[1],c=n.filter((function(t){return t.type===S.h.COIN||!!r.find((function(e){return e.id===t.id}))}));t.tradableCoinList=c.map((function(t){return t.symbol}))}))},data:function(){return{form:{coinFrom:"",coinTo:"",minimumValueToBuy:""},estimation:null,estimationType:null,estimationRoute:null,isEstimationLoading:!1,estimationError:!1,isEstimationPending:!1,debouncedGetEstimation:null,selectedConvertType:S.i.OPTIMAL,txForm:{},addressBalance:[],tradableCoinList:[]}},validations:function(){return{form:{coinFrom:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)},coinTo:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)}},isEstimationWaiting:{nothingToWait:function(t){return!t}}}},computed:{sellAmount:function(){var t=this,e=this.addressBalance.find((function(e){return e.coin.symbol===t.form.coinFrom}));return e&&e.amount},preConvertType:function(){return this.selectedConvertType===S.i.POOL_DIRECT?S.i.POOL:this.selectedConvertType},convertType:function(){return this.preConvertType===S.i.OPTIMAL?this.estimationType:this.preConvertType},txType:function(){return this.convertType===S.i.POOL?y.a.SELL_ALL_SWAP_POOL:y.a.SELL_ALL},txData:function(){return H(H({},this.txType===y.a.SELL_ALL?{coinToSell:this.form.coinFrom,coinToBuy:this.form.coinTo}:{coins:this.estimationRoute?this.estimationRoute.map((function(t){return t.id})):[this.form.coinFrom,this.form.coinTo]}),{},{minimumValueToBuy:this.form.minimumValueToBuy||this.slippageAmount||void 0})},tradableAddressBalance:function(){var t=this;return this.addressBalance.filter((function(e){return t.tradableCoinList.find((function(t){return e.coin.symbol===t}))}))},slippageAmount:function(){return.95*this.currentEstimation},currentEstimation:function(){return this.$v.form.$invalid||!this.estimation||this.isEstimationWaiting||this.estimationError?0:this.estimation},isEstimationWaiting:function(){return this.isEstimationPending||this.isEstimationLoading},isEstimationErrorVisible:function(){return this.estimationError&&!this.isEstimationWaiting}},watch:{"form.coinFrom":function(){this.watchForm()},"form.coinTo":function(){this.watchForm()},selectedConvertType:function(){this.debouncedGetEstimation(),this.debouncedGetEstimation.flush()}},created:function(){this.debouncedGetEstimation=A(this.getEstimation,1e3)},methods:{pretty:F.p,prettyExact:F.q,inputBlur:function(){this.debouncedGetEstimation.pending()&&this.debouncedGetEstimation.flush()},watchForm:function(){this.$store.getters.isOfflineMode||this.$v.form.$invalid||(this.debouncedGetEstimation(),this.isEstimationPending=!0)},getEstimation:function(){var t=this;if(this.isEstimationPending=!1,this.isEstimationLoading&&"function"==typeof D&&D(Z),!this.$store.getters.isOfflineMode&&!this.$v.form.$invalid)return this.sellAmount?(this.isEstimationLoading=!0,this.estimationError=!1,Object(C.c)({coinToSell:this.form.coinFrom,valueToSell:this.sellAmount,coinToBuy:this.form.coinTo,swapFrom:this.preConvertType,findRoute:this.selectedConvertType!==S.i.POOL_DIRECT,gasCoin:this.txForm.gasCoin||0,sellAll:!0},{cancelToken:new m.a.CancelToken((function(t){return D=t}))}).then((function(e){t.estimation=e.will_get,t.estimationType=e.swap_from,t.estimationRoute=e.route,t.isEstimationLoading=!1})).catch((function(e){e.message!==Z&&(t.isEstimationLoading=!1,t.estimationError=Object(L.a)(e,"Estimation error: "))}))):(this.estimationError="There are no ".concat(this.form.coinFrom," on your balance"),Promise.reject(this.estimationError))},clearForm:function(){this.form.coinFrom="",this.form.coinTo="",this.form.minimumValueToBuy="",this.$v.$reset(),this.selectedConvertType=S.i.OPTIMAL}}},Q=Object(G.a)(K,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("TxForm",{attrs:{"data-test-id":"convertSellAll",txData:t.txData,$txData:t.$v,txType:t.txType},on:{"update:addressBalance":function(e){t.addressBalance=e},"update:txForm":function(e){t.txForm=e},"clear-form":function(e){return t.clearForm()}},scopedSlots:t._u([{key:"panel-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[t._v("\n            "+t._s(t.$td("Sell all coins","convert.sell-all-title"))+"\n        ")]),t._v(" "),o("p",{staticClass:"panel__header-description"},[t._v("\n            "+t._s(t.$td("Sell all of the coins that you possess in a single click.","convert.sell-all-description"))+"\n        ")])]},proxy:!0},{key:"default",fn:function(e){e.fee,e.addressBalance;return[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-check-label"},[t._v("Swap type")]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.OPTIMAL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.OPTIMAL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.OPTIMAL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Auto","form.convert-type-auto")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.BANCOR,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.BANCOR)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.BANCOR}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Reserves","form.convert-type-bancor")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Pools","form.convert-type-pool")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL_DIRECT,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL_DIRECT)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL_DIRECT}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Direct pool","form.convert-type-pool-direct")))])])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-3"},[o("FieldCoin",{attrs:{"data-test-id":"convertSellAllInputSellCoin",$value:t.$v.form.coinFrom,label:t.$td("Coin to sell","form.convert-sell-coin-sell"),"coin-list":t.tradableAddressBalance},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinFrom,callback:function(e){t.$set(t.form,"coinFrom","string"==typeof e?e.trim():e)},expression:"form.coinFrom"}}),t._v(" "),t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-3"},[o("FieldCoin",{attrs:{"data-test-id":"convertSellAllInputBuyCoin",$value:t.$v.form.coinTo,label:t.$td("Coin to get","form.convert-sell-coin-get"),"coin-list":t.tradableCoinList},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinTo,callback:function(e){t.$set(t.form,"coinTo","string"==typeof e?e.trim():e)},expression:"form.coinTo"}}),t._v(" "),t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-3"},[t.$store.getters.isOfflineMode?t._e():o("div",{staticClass:"form-field form-field--dashed",class:{"is-error":t.isEstimationErrorVisible}},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.currentEstimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get approximately","form.convert-sell-receive-estimation")))]),t._v(" "),o("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isEstimationWaiting}}),t._v(" "),t.isEstimationErrorVisible?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.estimationError))]):t._e()],1)]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("label",{staticClass:"form-field"},[o("InputMaskedAmount",{directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal"},model:{value:t.form.minimumValueToBuy,callback:function(e){t.$set(t.form,"minimumValueToBuy",e)},expression:"form.minimumValueToBuy"}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Min amount to get (optional)","form.convert-sell-min")))])],1),t._v(" "),o("div",{staticClass:"form-field__help"},[t._v("\n                "+t._s(t.$td("Default:","form.help-default"))+" "+t._s(t.slippageAmount?t.pretty(t.slippageAmount):0)+"\n            ")])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2 u-hidden-medium-down"})]}},{key:"submit-title",fn:function(){return[t._v("\n        "+t._s(t.$td("Sell all","form.convert-sell-button"))+"\n    ")]},proxy:!0},{key:"confirm-modal-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[o("img",{staticClass:"panel__header-title-icon",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-feature-convert.svg",alt:"",role:"presentation",width:"40",height:"40"}}),t._v("\n            "+t._s(t.$td("Convert Coins","convert.convert-title"))+"\n        ")])]},proxy:!0},{key:"confirm-modal-body",fn:function(){return[o("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin u-text-left"},[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.sellAmount,exact:!0}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will send","form.convert-sell-confirm-send")))])],1)]),t._v(" "),t.estimation?o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.estimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get approximately *","form.convert-sell-confirm-receive-estimation")))])],1),t._v(" "),o("div",{staticClass:"form-field__help u-text-left"},[t._v("\n                    "+t._s(t.$td("* The result amount depends on the current rate at the time of the exchange and may differ from the above.","form.convert-confirm-note"))+"\n                ")])]):o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.form.coinTo}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will get","form.convert-sell-confirm-receive")))])])]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.txData.minimumValueToBuy,exact:!0}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Min amount to get","form.convert-sell-confirm-min")))])],1)]),t._v(" "),t.estimation?[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.estimation/t.sellAmount}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinFrom)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.sellAmount/t.estimation}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinTo)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)])]:t._e(),t._v(" "),t.estimationRoute?o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.estimationRoute.map((function(t){return t.symbol})).join(" > ")}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap route","form.convert-route")))])])]):t._e(),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                        "+t._s(t.convertType===t.$options.CONVERT_TYPE.POOL?"Pools":"Reserves")+"\n                    ")]),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap type","form.convert-type")))])])])],2)]},proxy:!0}])})}),[],!1,null,null,null).exports;function tt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function et(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?tt(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):tt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var it="Cancel previous request",ot={TX_TYPE:y.a,CONVERT_TYPE:S.i,components:{BaseAmount:B.a,TxForm:R.a,FieldCoin:N.a,InputMaskedAmount:M.a,Loader:j.a},directives:{checkEmpty:k.a},mixins:[d.validationMixin],fetch:function(){var t=this;return Promise.all([Object(T.d)(),Object(T.j)()]).then((function(e){var o=Object(l.a)(e,2),n=o[0],r=o[1],c=n.filter((function(t){return t.type===S.h.COIN||!!r.find((function(e){return e.id===t.id}))}));t.tradableCoinList=c.map((function(t){return t.symbol}))}))},data:function(){return{form:{buyAmount:"",coinFrom:"",coinTo:"",maximumValueToSell:""},estimation:null,estimationType:null,estimationRoute:null,isEstimationLoading:!1,estimationError:!1,isEstimationPending:!1,debouncedGetEstimation:null,selectedConvertType:S.i.OPTIMAL,txForm:{},addressBalance:[],tradableCoinList:[]}},validations:function(){return{form:{buyAmount:{required:v.a},coinFrom:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)},coinTo:{required:v.a,minLength:this.$store.getters.isOfflineMode?function(){return!0}:h()(3)}},isEstimationWaiting:{nothingToWait:function(t){return!t}}}},computed:{preConvertType:function(){return this.selectedConvertType===S.i.POOL_DIRECT?S.i.POOL:this.selectedConvertType},convertType:function(){return this.preConvertType===S.i.OPTIMAL?this.estimationType:this.preConvertType},txType:function(){return this.convertType===S.i.POOL?y.a.BUY_SWAP_POOL:y.a.BUY},txData:function(){return et(et({},this.txType===y.a.BUY?{coinToSell:this.form.coinFrom,coinToBuy:this.form.coinTo}:{coins:this.estimationRoute?this.estimationRoute.map((function(t){return t.id})):[this.form.coinFrom,this.form.coinTo]}),{},{valueToBuy:this.form.buyAmount,maximumValueToSell:this.form.maximumValueToSell||this.slippageAmount||Math.pow(10,15)})},tradableAddressBalance:function(){var t=this;return this.addressBalance.filter((function(e){return t.tradableCoinList.find((function(t){return e.coin.symbol===t}))}))},slippageAmount:function(){return 1.05*this.currentEstimation},currentEstimation:function(){return this.$v.form.$invalid||!this.estimation||this.isEstimationWaiting||this.estimationError?0:this.estimation},isEstimationWaiting:function(){return this.isEstimationPending||this.isEstimationLoading},isEstimationErrorVisible:function(){return this.estimationError&&!this.isEstimationWaiting}},watch:{"form.buyAmount":function(){this.watchForm()},"form.coinFrom":function(){this.watchForm()},"form.coinTo":function(){this.watchForm()},selectedConvertType:function(){this.debouncedGetEstimation(),this.debouncedGetEstimation.flush()}},created:function(){this.debouncedGetEstimation=A(this.getEstimation,1e3)},methods:{pretty:F.p,prettyExact:F.q,inputBlur:function(){this.debouncedGetEstimation.pending()&&this.debouncedGetEstimation.flush()},watchForm:function(){this.$store.getters.isOfflineMode||this.$v.form.$invalid||(this.debouncedGetEstimation(),this.isEstimationPending=!0)},getEstimation:function(){var t=this;if(this.isEstimationPending=!1,this.isEstimationLoading&&"function"==typeof J&&J(it),!this.$store.getters.isOfflineMode&&!this.$v.form.$invalid)return this.isEstimationLoading=!0,this.estimationError=!1,Object(C.b)({coinToBuy:this.form.coinTo,valueToBuy:this.form.buyAmount,coinToSell:this.form.coinFrom,swapFrom:this.preConvertType,findRoute:this.selectedConvertType!==S.i.POOL_DIRECT,gasCoin:this.txForm.gasCoin||0},{cancelToken:new m.a.CancelToken((function(t){return J=t}))}).then((function(e){t.estimation=e.will_pay,t.estimationType=e.swap_from,t.estimationRoute=e.route,t.isEstimationLoading=!1})).catch((function(e){e.message!==it&&(t.isEstimationLoading=!1,t.estimationError=Object(L.a)(e,"Estimation error: "))}))},clearForm:function(){this.form.buyAmount="",this.form.coinFrom="",this.form.coinTo="",this.form.maximumValueToSell="",this.$v.$reset(),this.selectedConvertType=S.i.OPTIMAL}}},nt={components:{ConvertSellForm:U,ConvertSellAllForm:Q,ConvertBuyForm:Object(G.a)(ot,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("TxForm",{attrs:{"data-test-id":"convertBuy",txData:t.txData,$txData:t.$v,txType:t.txType},on:{"update:addressBalance":function(e){t.addressBalance=e},"update:txForm":function(e){t.txForm=e},"clear-form":function(e){return t.clearForm()}},scopedSlots:t._u([{key:"panel-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[t._v("\n            "+t._s(t.$td("Buy coins","convert.buy-title"))+"\n        ")]),t._v(" "),o("p",{staticClass:"panel__header-description"},[t._v("\n            "+t._s(t.$td("If you want to buy a specific coin, you can do it here.","convert.buy-description"))+"\n        ")])]},proxy:!0},{key:"default",fn:function(e){e.fee,e.addressBalance;return[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-check-label"},[t._v("Swap type")]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.OPTIMAL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.OPTIMAL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.OPTIMAL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Auto","form.convert-type-auto")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.BANCOR,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.BANCOR)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.BANCOR}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Reserves","form.convert-type-bancor")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Pools","form.convert-type-pool")))])]),t._v(" "),o("label",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedConvertType,expression:"selectedConvertType"}],staticClass:"form-check__input",attrs:{type:"radio",name:"convert-type"},domProps:{value:t.$options.CONVERT_TYPE.POOL_DIRECT,checked:t._q(t.selectedConvertType,t.$options.CONVERT_TYPE.POOL_DIRECT)},on:{change:function(e){t.selectedConvertType=t.$options.CONVERT_TYPE.POOL_DIRECT}}}),t._v(" "),o("span",{staticClass:"form-check__label form-check__label--radio"},[t._v(t._s(t.$td("Direct pool","form.convert-type-pool-direct")))])])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("FieldCoin",{attrs:{"data-test-id":"convertBuyInputBuyCoin",$value:t.$v.form.coinTo,label:t.$td("Coin to buy","form.convert-buy-coin-buy"),"coin-list":t.tradableCoinList},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinTo,callback:function(e){t.$set(t.form,"coinTo","string"==typeof e?e.trim():e)},expression:"form.coinTo"}}),t._v(" "),t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinTo.$dirty&&!t.$v.form.coinTo.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("label",{staticClass:"form-field",class:{"is-error":t.$v.form.buyAmount.$error}},[o("InputMaskedAmount",{directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{"data-test-id":"convertBuyInputBuyAmount"},on:{blur:function(e){t.$v.form.buyAmount.$touch(),t.inputBlur()}},model:{value:t.form.buyAmount,callback:function(e){t.$set(t.form,"buyAmount",e)},expression:"form.buyAmount"}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Buy amount","form.convert-buy-amount")))])],1),t._v(" "),t.$v.form.buyAmount.$dirty&&!t.$v.form.buyAmount.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):t._e()]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("FieldCoin",{attrs:{"data-test-id":"convertBuyInputSellCoin",$value:t.$v.form.coinFrom,label:t.$td("Coin to spend","form.convert-buy-coin-spend"),"coin-list":t.tradableAddressBalance},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinFrom,callback:function(e){t.$set(t.form,"coinFrom","string"==typeof e?e.trim():e)},expression:"form.coinFrom"}}),t._v(" "),t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.required?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinFrom.$dirty&&!t.$v.form.coinFrom.minLength?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t._e()],1),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[t.$store.getters.isOfflineMode?t._e():o("div",{staticClass:"form-field form-field--dashed",class:{"is-error":t.isEstimationErrorVisible}},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.currentEstimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will pay approximately","form.convert-buy-pay-estimation")))]),t._v(" "),o("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isEstimationWaiting}}),t._v(" "),t.isEstimationErrorVisible?o("span",{staticClass:"form-field__error"},[t._v(t._s(t.estimationError))]):t._e()],1)]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2"},[o("label",{staticClass:"form-field"},[o("InputMaskedAmount",{directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal"},model:{value:t.form.maximumValueToSell,callback:function(e){t.$set(t.form,"maximumValueToSell",e)},expression:"form.maximumValueToSell"}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Max amount to spend (optional)","form.convert-buy-max")))])],1),t._v(" "),o("div",{staticClass:"form-field__help"},[t._v("\n                "+t._s(t.$td("Default:","form.help-default"))+" "+t._s(t.slippageAmount?t.pretty(t.slippageAmount):"10^15")+"\n            ")])]),t._v(" "),o("div",{staticClass:"u-cell u-cell--medium--1-2 u-hidden-medium-down"})]}},{key:"submit-title",fn:function(){return[t._v("\n        "+t._s(t.$td("Buy","form.convert-buy-button"))+"\n    ")]},proxy:!0},{key:"confirm-modal-header",fn:function(){return[o("h1",{staticClass:"panel__header-title"},[o("img",{staticClass:"panel__header-title-icon",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-feature-convert.svg",alt:"",role:"presentation",width:"40",height:"40"}}),t._v("\n            "+t._s(t.$td("Convert сoins","convert.convert-title"))+"\n        ")])]},proxy:!0},{key:"confirm-modal-body",fn:function(){return[o("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin u-text-left"},[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.form.buyAmount,exact:!0}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You buy","form.convert-buy-confirm-get")))])],1)]),t._v(" "),t.estimation?o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.estimation,prefix:"≈ "}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will pay approximately *","form.convert-buy-confirm-pay-estimation")))])],1),t._v(" "),o("div",{staticClass:"form-field__help u-text-left"},[t._v("\n                    "+t._s(t.$td("* The result amount depends on the current rate at the time of the exchange and may differ from the above.","form.convert-confirm-note"))+"\n                ")])]):o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.form.coinFrom}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You will pay","form.convert-buy-confirm-pay")))])])]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.txData.maximumValueToSell,exact:!0}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Max amount to spend","form.convert-buy-confirm-max")))])],1)]),t._v(" "),t.estimation?[o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinFrom,amount:t.estimation/t.form.buyAmount}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinTo)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)]),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{tag:"div",coin:t.form.coinTo,amount:t.form.buyAmount/t.estimation}}),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v("1 "+t._s(t.form.coinFrom)+" "+t._s(t.$td("rate","form.convert-rate")))])],1)])]:t._e(),t._v(" "),t.estimationRoute?o("div",{staticClass:"u-cell"},[o("label",{staticClass:"form-field form-field--dashed"},[o("input",{staticClass:"form-field__input is-not-empty",attrs:{type:"text",readonly:"",tabindex:"-1"},domProps:{value:t.estimationRoute.map((function(t){return t.symbol})).join(" > ")}}),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap route","form.convert-route")))])])]):t._e(),t._v(" "),o("div",{staticClass:"u-cell"},[o("div",{staticClass:"form-field form-field--dashed"},[o("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                        "+t._s(t.convertType===t.$options.CONVERT_TYPE.POOL?"Pools":"Reserves")+"\n                    ")]),t._v(" "),o("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Swap type","form.convert-type")))])])])],2)]},proxy:!0}])})}),[],!1,null,null,null).exports},fetch:function(t){var e=t.app;return t.store.commit("SET_SECTION_NAME",e.$td("Swap","common.page-convert")),Promise.resolve()},head:function(){var title=Object(n.a)(this.$store.state.sectionName,this.$i18n.locale),t=this.$td("Sell—either partially or fully—a coin that you own or buy a new one.","convert.seo-description"),e="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:t},{hid:"og-description",name:"og:description",content:t},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-convert").concat(e,".png")}]}}},st=Object(G.a)(nt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"u-section u-container"},[o("ConvertBuyForm"),t._v(" "),o("ConvertSellForm"),t._v(" "),o("ConvertSellAllForm")],1)}),[],!1,null,null,null);e.default=st.exports},739:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(745);e.default=function(t){return(0,n.withParams)({type:"minLength",min:t},(function(e){return!(0,n.req)(e)||(0,n.len)(e)>=t}))}},742:function(t,e,o){"use strict";var n=o(760),r=o.n(n);e.a={bind:function(t,e,o){"TEXTAREA"===t.tagName&&o.context.$nextTick((function(){r()(t)}))},componentUpdated:function(t,e,o){"TEXTAREA"===t.tagName&&o.context.$nextTick((function(){r.a.update(t)}))},unbind:function(t){r.a.destroy(t)}}},743:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(745);e.default=function(t){return(0,n.withParams)({type:"maxLength",max:t},(function(e){return!(0,n.req)(e)||(0,n.len)(e)<=t}))}},751:function(t,e,o){var n=o(2),r=o(483),l=o(17),c=o(40),m=o(193).onFreeze,d=Object.freeze;n({target:"Object",stat:!0,forced:l((function(){d(1)})),sham:!r},{freeze:function(t){return d&&c(t)?d(m(t)):t}})},752:function(t,e,o){"use strict";var n=o(327),r=(o(79),o(774),o(777)),l=["input"],c={ideFix:null,imaskAmount:{mask:Number,scale:18,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[","]},directives:{imask:r.a},props:{value:{type:[String,Number],default:""}},data:function(){return{maskedValue:""}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,Object(n.a)(t,l));return e}},watch:{value:function(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted:function(){this.updateMaskState(this.value)},methods:{updateMaskState:function(t){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}},onAcceptInput:function(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},m=o(59),component=Object(m.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.$options.imaskAmount,expression:"$options.imaskAmount"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"decimal"},on:{accept:t.onAcceptInput}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},754:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(745);e.default=function(t){return(0,n.withParams)({type:"minValue",min:t},(function(e){return!(0,n.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+t}))}},759:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));o(37),o(35),o(1);var n={};var r={inheritAttrs:!1,render:function(t){return this.svgElSource?t("svg",{on:this.$listeners,attrs:Object.assign(this.getSvgAttrs(this.svgElSource),(e=this.$attrs,Object.keys(e).reduce((function(t,o){return!1!==e[o]&&null!==e[o]&&void 0!==e[o]&&(t[o]=e[o]),t}),{}))),domProps:{innerHTML:this.getSvgContent(this.svgElSource)}}):null;var e},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:function(svg){return svg}},keepDuringLoading:{type:Boolean,default:!0}},data:function(){return{svgElSource:null}},watch:{src:function(t){this.getSource(t)}},mounted:function(){this.getSource(this.src)},methods:{getSvgAttrs:function(t){var e={},o=t.attributes;if(!o)return e;for(var i=o.length-1;i>=0;i--)e[o[i].name]=o[i].value;return e},getSvgContent:function(t){return t=t.cloneNode(!0),t=this.transformSource(t),this.title&&function(svg,title){var t=svg.getElementsByTagName("title");if(t.length)t[0].textContent=title;else{var e=document.createElementNS("http://www.w3.org/2000/svg","title");e.textContent=title,svg.appendChild(e)}}(t,this.title),t.innerHTML},getSource:function(t){var e=this;n[t]||(n[t]=this.download(t)),this.svgElSource&&n[t].isPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),n[t].then((function(svg){e.svgElSource=svg,e.$nextTick((function(){e.$emit("loaded",e.$el)}))})).catch((function(o){e.svgElSource&&(e.svgElSource=null,e.$emit("unloaded")),delete n[t],e.$emit("error",o)}))},download:function(t){return function(t){if(t.isPending)return t;var e=!0,o=t.then((function(t){return e=!1,t}),(function(t){throw e=!1,t}));return o.isPending=function(){return e},o}(new Promise((function(e,o){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){if(n.status>=200&&n.status<400)try{var t=(new DOMParser).parseFromString(n.responseText,"text/xml").getElementsByTagName("svg")[0];t?e(t):o(new Error('Loaded file is not valid SVG"'))}catch(t){o(t)}else o(new Error("Error loading SVG"))},n.onerror=o,n.send()})))}}}},760:function(t,e,o){var n,r,l;r=[t,e],void 0===(l="function"==typeof(n=function(t,e){"use strict";var o,n,map="function"==typeof Map?new Map:(o=[],n=[],{has:function(t){return o.indexOf(t)>-1},get:function(t){return n[o.indexOf(t)]},set:function(t,e){-1===o.indexOf(t)&&(o.push(t),n.push(e))},delete:function(t){var e=o.indexOf(t);e>-1&&(o.splice(e,1),n.splice(e,1))}}),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function l(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!map.has(t)){var e=null,o=null,n=null,l=function(){t.clientWidth!==o&&_()},c=function(style){window.removeEventListener("resize",l,!1),t.removeEventListener("input",_,!1),t.removeEventListener("keyup",_,!1),t.removeEventListener("autosize:destroy",c,!1),t.removeEventListener("autosize:update",_,!1),Object.keys(style).forEach((function(e){t.style[e]=style[e]})),map.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",c,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",_,!1),window.addEventListener("resize",l,!1),t.addEventListener("input",_,!1),t.addEventListener("autosize:update",_,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",map.set(t,{destroy:c,update:_}),m()}function m(){var style=window.getComputedStyle(t,null);"vertical"===style.resize?t.style.resize="none":"both"===style.resize&&(t.style.resize="horizontal"),e="content-box"===style.boxSizing?-(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom)):parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth),isNaN(e)&&(e=0),_()}function d(e){var o=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=o,t.style.overflowY=e}function f(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function v(){if(0!==t.scrollHeight){var n=f(t),r=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",o=t.clientWidth,n.forEach((function(t){t.node.scrollTop=t.scrollTop})),r&&(document.documentElement.scrollTop=r)}}function _(){v();var e=Math.round(parseFloat(t.style.height)),o=window.getComputedStyle(t,null),l="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):t.offsetHeight;if(l<e?"hidden"===o.overflowY&&(d("scroll"),v(),l="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==o.overflowY&&(d("hidden"),v(),l="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),n!==l){n=l;var c=r("autosize:resized");try{t.dispatchEvent(c)}catch(t){}}}}function c(t){var e=map.get(t);e&&e.destroy()}function m(t){var e=map.get(t);e&&e.update()}var d=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((d=function(t){return t}).destroy=function(t){return t},d.update=function(t){return t}):((d=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return l(t,e)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],c),t},d.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],m),t}),e.default=d,t.exports=e.default})?n.apply(e,r):n)||(t.exports=l)},765:function(t,e,o){"use strict";o(79),o(119),o(120);var n=o(15),r=o(736),l=o(735),c=o(752);n.a.RM=2;var m={components:{InputMaskedAmount:c.a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},maxValue:{type:[String,Number],default:void 0},addressBalance:{type:Array,default:function(){return[]}},selectedCoinSymbol:{type:String,default:""},fee:{type:[Object,null],default:null}},data:function(){return{isUseMax:!1}},computed:{maxValueComputed:function(){var t,e,o=this;if(void 0!==this.maxValue)return this.maxValue;var l=this.addressBalance.find((function(t){return t.coin.symbol===o.selectedCoinSymbol}));if(l){if(!function(t,e){var o=Object(r.h)(e);if(!o&&t.symbol===e)return!0;if(o&&t.id===e)return!0;return!1}(l.coin,null===(t=this.fee)||void 0===t?void 0:t.coin))return l.amount;var c=(null===(e=this.fee)||void 0===e?void 0:e.value)||0,m=new n.a(l.amount).minus(c).toFixed();return m>0?m:"0"}},isMaxValueDefined:function(){return void 0!==this.maxValueComputed}},watch:{value:function(t){(t||0===t)&&this.isMaxValueDefined?new n.a(t).toFixed()!==new n.a(this.maxValueComputed).toFixed()&&(this.isUseMax=!1):this.isUseMax=!1},maxValueComputed:function(t){this.isMaxValueDefined&&this.isUseMax&&this.useMax()}},methods:{useMax:function(){if(!this.isMaxValueDefined)return!1;this.isUseMax=!0,this.$emit("input",this.maxValueComputed),this.$value.$touch()}}},d=o(59),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"form-field",class:{"is-error":t.$value.$error,"form-field--with-use-max":t.isMaxValueDefined}},[o("InputMaskedAmount",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal",value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}}},"InputMaskedAmount",t.$attrs,!1)),t._v(" "),t.isMaxValueDefined?o("button",{staticClass:"form-field__use-max link--main link--opacity u-semantic-button",attrs:{type:"button"},on:{click:t.useMax}},[t._v("Use max")]):t._e(),t._v(" "),o("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null);e.a=component.exports},766:function(t,e,o){"use strict";function n(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var o=document.getSelection(),n=o.rangeCount>0&&o.getRangeAt(0);e.select(),e.selectionStart=0,e.selectionEnd=t.length;var r=document.execCommand("copy");return document.body.removeChild(e),n&&(o.removeAllRanges(),o.addRange(n)),r}function r(){return"undefined"!=typeof document&&"function"==typeof document.queryCommandSupported&&document.queryCommandSupported("copy")}o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return r}))},772:function(t,e,o){"use strict";var n=o(2),r=o(36),l=o(329),c=o(484),m=o(26);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,o=l.f(e),n=o.resolve,d=o.reject,f=c((function(){var o=r(e.resolve),l=[],c=0,d=1;m(t,(function(t){var r=c++,m=!1;l.push(void 0),d++,o.call(e,t).then((function(t){m||(m=!0,l[r]={status:"fulfilled",value:t},--d||n(l))}),(function(t){m||(m=!0,l[r]={status:"rejected",reason:t},--d||n(l))}))})),--d||n(l)}));return f.error&&d(f.value),o.promise}})},776:function(t,e,o){o(772)},831:function(t,e,o){"use strict";var n=o(795);e.a=function(){return n.a.Date.now()}},853:function(t,e,o){"use strict";o(8),o(9),o(21);var n=/\s/;var r=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e},l=/^\s+/;var c=function(t){return t?t.slice(0,r(t)+1).replace(l,""):t},m=o(780),d=o(805),f=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,_=/^0o[0-7]+$/i,h=parseInt;e.a=function(t){if("number"==typeof t)return t;if(Object(d.a)(t))return NaN;if(Object(m.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(m.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=c(t);var o=v.test(t);return o||_.test(t)?h(t.slice(2),o?2:8):f.test(t)?NaN:+t}}}]);